const VConfig=function(){const e={trinity:{host:"https://trinitymongo.valueinstrument.org",port:443},builderz:{host:"https://buildersmongo.valueinstrument.org",port:443},local:{host:"http://localhost",port:6022}},t={builderz:{email:"https://api.builderz.io/v1/email",telegram:"https://api.builderz.io/v1/telegram",float:"https://api.builderz.io/v1/crypto/float"},local:{email:"http://localhost:8889/v1/email",telegram:"http://localhost:8889/v1/telegram",float:"http://localhost:8889/v1/crypto/float"}},n={slug:"/theme/lang",english:"en_US",englisch:"en_US",german:"de_DE_sie","german official":"de_DE_sie","deutsch offiziell":"de_DE_sie","german personal":"de_DE_du","deutsch persönlich":"de_DE_du"},r={appVersion:"Alpha 3.6.0",uploadVersion:"14",entityLedger:VNetworkInit.entityLedger,chatLedger:VNetworkInit.chatLedger,transactionLedger:VNetworkInit.transactionLedger,managedTransactionApi:VNetworkInit.managedTransactionApi,socketHost:e[VNetworkInit.mongodbEndpoint].host,socketPort:e[VNetworkInit.mongodbEndpoint].port,namespaceEndpoint:{"firebase-local":"http://localhost:5001/entity-profile/us-central1/api/v1","firebase-staging":"https://us-central1-entity-authentication.cloudfunctions.net/api/v1","firebase-development":"https://us-central1-entity-profile.cloudfunctions.net/api/v1","firebase-production":"https://us-central1-entity-namespace.cloudfunctions.net/api/v1","firebase-client-dfr":"https://us-central1-client-dfr.cloudfunctions.net/api/v1"}[VNetworkInit.namespaceEndpoint],telegramEndpoint:t[VNetworkInit.apiEndpoint||"builderz"].telegram,emailEndpoint:t[VNetworkInit.apiEndpoint||"builderz"].email,networkAdminEmail:VNetworkInit.networkAdminEmail,sourceEndpoint:VNetworkInit.sourceEndpoint,logo:VNetworkInit.logo,additionalImage:VNetworkInit.additionalImage,imprint:VNetworkInit.imprint,mapDefault:VNetworkInit.mapDefault,highlights:VNetworkInit.highlights,locale:n[VNetworkInit.language],localeSlug:n.slug,questionnaire:VNetworkInit.questionnaire,featureVideo:VNetworkInit.featureVideo,plugins:VNetworkInit.plugins,landingPage:VNetworkInit.landingPage,callToActionText:VNetworkInit.callToActionText,callToActionProfile:VNetworkInit.callToActionProfile,defaultPrivacy:VNetworkInit.defaultPrivacy,askforEmail:VNetworkInit.askforEmail,requireEmail:VNetworkInit.requireEmail,confirmEmail:VNetworkInit.confirmEmail,emailKey:VNetworkInit.emailKey,useBuilds:VNetworkInit.useBuilds,buildsHost:"https://production.valueinstrument.org",sendLogsToServer:!1,devMode:VNetworkInit.devMode,drawMap:!0,queryContractState:!0,joinVersion:2,subscribeToChainEvents:!1,balanceCheckInterval:90,demoContent:!1,defaultVerification:!1,update3BoxEntityStore:!1,entityCachesDuration:480,viewedCacheDuration:480,uuidStringLength:10,tinyImageWidth:40,tinyImageQuality:.93,thumbnailWidth:88,thumbnailQuality:.9,mediumImageWidth:510,mediumImageQuality:.87,coinTicker:"ETH",tokenTicker:"V"},a={default:"goerli",goerli:{network:"Goerli Testnet",contractAddress:"0x8EC9AF6BAa83F3256101049dF7c691553B310EBA",transactionFee:3333,communityContribution:200,explorerTx:"https://goerli.etherscan.io/tx/",explorerAddr:"https://goerli.etherscan.io/address/",float:{coin:"GöETH",amount:.2,threshold:.15,api:t.builderz.float}},symbol1:{type:"TEST_NET",rpc:"http://198.199.80.167:3000",generationHash:"B626827FBD912D95931E03E9718BFE8FFD7D316E9FBB5416ED2B3C072EA32406",mosaicId:"85BBEA6CC462B244"},symbol2:{type:"TEST_NET",rpc:"http://api-01.us-west-1.symboldev.network:3000",generationHash:"44D2225B8932C9A96DCB13508CBCDFFA9A9663BFBA2354FEEC8FCFCB7E19846C",mosaicId:"747B276C30626442"},localeos:{rpc:"http://localhost:8888",privKey:"5JtUScZK2XEp3g9gh7F8bwtPTRAkASmNrrftmx4AxDKD5K4zDnr"},testeos:{rpc:"https://api.testnet.eos.io"}};function i(e){return r[e]}function s(e=VNetworkInit.tokenContract){if(e)return a[e];{const e=a[a.default];return e.network=a.default,e}}return V.getSetting=i,V.getTokenContract=s,{getSetting:i,getTokenContract:s}}(),VState=function(){"use strict";document.onkeyup=function(e){e.ctrlKey&&83==e.which?console.log(V.getState()):e.ctrlKey&&65==e.which&&console.log(V.getCache())};const e={};let t={};function n(t="all"){return"all"==t?e:e[t]}function r(t,n){if("clear"!=n)if(e[t]||(Array.isArray(n)?e[t]=[]:e[t]={}),Array.isArray(n))for(let r=0;r<n.length;r++)e[t].push(n[r]);else"object"==typeof n?Object.assign(e[t],n):e[t]=n;else delete e[t]}function a(e){e.auth.uPhrase?e.auth=!0:e.auth=!1,V.setState("activeEntity","clear"),V.setState("activeEntity",e),console.log("set active entity")}function i(e){const t=n("activeEntity");return e?t[e]:t}function s(){const e=f("last-connected-address");return e?e.replace(/"/g,""):void 0}function o(e,t){return l()[e]?l()[e].data.find(e=>t.includes(" #")?e.fullId==t:t.length==V.getSetting("uuidStringLength")&&isNaN(Number(t.slice(-5)))?e.uuidE==t:e.path==t):void 0}function l(e){return e?t[e]:t}function c(e,n){if("clear"==n)return"entire cache"==e?void(t={}):void delete t[e];t[e]||(t[e]={}),Array.isArray(n)?t[e].timestamp?1==n.length?u(e,n[0]):t[e].data=[].concat(t[e].data,n):d(e,n):"object"==typeof n&&(t[e].timestamp?u(e,n):d(e,[n]))}function u(e,n){n=V.castJson(n,"clone");const r=t[e].data.findIndex(e=>e.uuidE==n.uuidE);-1!=r?("points"==e&&delete n.geometry,Object.assign(t[e].data[r],n)):t[e].data.push(n)}function d(e,n){const r={timestamp:Date.now(),date:new Date,data:n};Object.assign(t[e],r)}function p(e,t){if("active"==e){if(Array.isArray(t)){let e;for(let r=0;r<t.length;r++){const a=n(t[r])[n("active").navItem];if(a){e=a;break}}return e}return n(t)[n("active").navItem]}return n(t)[e]}function g(e,t){!Array.isArray(t)&&(t=[t]),t.forEach(t=>{try{const a=250;if(!(t.title.length<=a))throw new Error("Title too long (max "+a+", has "+t.title.length+"): "+t.title);{const a=n(e);if(a&&a[t.path])throw new Error('"'+t.path+'" already set');const i={};if(i[t.path]=t,r(e,i),t.use&&t.divertFundsToOwner){const e={};e[t.use.role]=t.use.role,r("rolesWithReceivingAddress",e)}}}catch(e){console.error(e)}})}function f(e){return localStorage.getItem(e)}function m(e,t){"clear"!=t?localStorage.setItem(e,JSON.stringify(t)):localStorage.removeItem(e)}return V.getState=n,V.setState=r,V.setActiveEntity=a,V.aE=i,V.cA=s,V.getFromCache=o,V.getLastViewed=function(){return o("viewed",n("active").lastViewedUuidE)},V.getCache=l,V.setCache=c,V.getNavItem=p,V.setNavItem=g,V.getLocal=f,V.setLocal=m,{getState:n,setState:r,setActiveEntity:a,aE:i,cA:s,getCache:l,setCache:c,getNavItem:p,setNavItem:g,getLocal:f,setLocal:m}}(),VTranslationsPrev={},VTranslation=function(){"use strict";const e=a(),t={},n={};function r(t){return"en_US"!=e&&n[e]&&n[e][t]&&"__"!=n[e][t]?n[e][t]:t}function a(){return(V.getLocal("locale")?V.getLocal("locale").replace(/"/g,""):void 0)||V.getSetting("locale")||"en_US"}return V.getString=r,V.getAppLocale=a,{setStringsToTranslate:function(e){const n={};"object"==typeof e?Object.keys(e).forEach(t=>{n[e[t]]="__"}):n[string]="__",Object.assign(t,n)},getStringsToTranslate:function(){return t},getString:r,getAppLocale:a,launch:async function(){if("en_US"==e)return;const t=`${V.getSetting("sourceEndpoint")}${V.getSetting("localeSlug")}/${e}.json`,r=await V.getData("",t,"api");n[e]=r.data[0]}}}();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).UniversalRouter=t()}(this,(function(){"use strict";function e(e,t){var a=[];return function(e,t,n){void 0===n&&(n={});var r=n.decode,a=void 0===r?function(e){return e}:r;return function(n){var r=e.exec(n);if(!r)return!1;for(var i=r[0],s=r.index,o=Object.create(null),l=function(e){if(void 0===r[e])return"continue";var n=t[e-1];"*"===n.modifier||"+"===n.modifier?o[n.name]=r[e].split(n.prefix+n.suffix).map((function(e){return a(e,n)})):o[n.name]=a(r[e],n)},c=1;c<r.length;c++)l(c);return{path:i,index:s,params:o}}}(function e(t,a,i){return t instanceof RegExp?function(e,t){if(!t)return e;var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:"",suffix:"",modifier:"",pattern:""});return e}(t,a):Array.isArray(t)?(s=a,o=i,l=t.map((function(t){return e(t,s,o).source})),new RegExp("(?:"+l.join("|")+")",n(o))):r(t,a,i);var s,o,l}(e,a,t),a,t)}function t(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function n(e){return e&&e.sensitive?"":"i"}function r(e,r,a){return function(e,r,a){void 0===a&&(a={});for(var i=a.strict,s=void 0!==i&&i,o=a.start,l=void 0===o||o,c=a.end,u=void 0===c||c,d=a.encode,p=void 0===d?function(e){return e}:d,g="["+t(a.endsWith||"")+"]|$",f="["+t(a.delimiter||"/#?")+"]",m=l?"^":"",h=0,y=e;h<y.length;h++){var v=y[h];if("string"==typeof v)m+=t(p(v));else{var b=t(p(v.prefix)),V=t(p(v.suffix));if(v.pattern)if(r&&r.push(v),b||V)if("+"===v.modifier||"*"===v.modifier){var w="*"===v.modifier?"?":"";m+="(?:"+b+"((?:"+v.pattern+")(?:"+V+b+"(?:"+v.pattern+"))*)"+V+")"+w}else m+="(?:"+b+"("+v.pattern+")"+V+")"+v.modifier;else m+="("+v.pattern+")"+v.modifier;else m+="(?:"+b+V+")"+v.modifier}}if(u)s||(m+=f+"?"),m+=a.endsWith?"(?="+g+")":"$";else{var S=e[e.length-1],x="string"==typeof S?-1<f.indexOf(S[S.length-1]):void 0===S;s||(m+="(?:"+f+"(?="+g+"))?"),x||(m+="(?="+f+"|"+g+")")}return new RegExp(m,n(a))}(function(e,n){void 0===n&&(n={});for(var r=function(e){for(var t=[],n=0;n<e.length;){var r=e[n];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)t.push({type:"CHAR",index:n,value:e[n++]});else{var a=1,i="";if("?"===e[o=n+1])throw new TypeError('Pattern cannot start with "?" at '+o);for(;o<e.length;)if("\\"!==e[o]){if(")"===e[o]){if(0==--a){o++;break}}else if("("===e[o]&&(a++,"?"!==e[o+1]))throw new TypeError("Capturing groups are not allowed at "+o);i+=e[o++]}else i+=e[o++]+e[o++];if(a)throw new TypeError("Unbalanced pattern at "+n);if(!i)throw new TypeError("Missing pattern at "+n);t.push({type:"PATTERN",index:n,value:i}),n=o}else{for(var s="",o=n+1;o<e.length;){var l=e.charCodeAt(o);if(!(48<=l&&l<=57||65<=l&&l<=90||97<=l&&l<=122||95===l))break;s+=e[o++]}if(!s)throw new TypeError("Missing parameter name at "+n);t.push({type:"NAME",index:n,value:s}),n=o}else t.push({type:"CLOSE",index:n,value:e[n++]});else t.push({type:"OPEN",index:n,value:e[n++]});else t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});else t.push({type:"MODIFIER",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}(e),a=n.prefixes,i=void 0===a?"./":a,s="[^"+t(n.delimiter||"/#?")+"]+?",o=[],l=0,c=0,u="",d=function(e){if(c<r.length&&r[c].type===e)return r[c++].value},p=function(e){var t=d(e);if(void 0!==t)return t;var n=r[c],a=n.type,i=n.index;throw new TypeError("Unexpected "+a+" at "+i+", expected "+e)},g=function(){for(var e,t="";e=d("CHAR")||d("ESCAPED_CHAR");)t+=e;return t};c<r.length;){var f=d("CHAR"),m=d("NAME"),h=d("PATTERN");if(m||h){var y=f||"";-1===i.indexOf(y)&&(u+=y,y=""),u&&(o.push(u),u=""),o.push({name:m||l++,prefix:y,suffix:"",pattern:h||s,modifier:d("MODIFIER")||""})}else{var v=f||d("ESCAPED_CHAR");if(v)u+=v;else if(u&&(o.push(u),u=""),d("OPEN")){y=g();var b=d("NAME")||"",V=d("PATTERN")||"",w=g();p("CLOSE"),o.push({name:b||(V?l++:""),pattern:b&&!V?s:V,prefix:y,suffix:w,modifier:d("MODIFIER")||""})}else p("END")}}return o}(e,a),r,a)}function a(e){try{return decodeURIComponent(e)}catch(t){return e}}function i(e,t){if("function"==typeof e.route.action)return e.route.action(e,t)}function s(e,t){if(!e||"object"!=typeof e)throw new TypeError("Invalid routes");this.options=Object.assign({decode:a},t),this.baseUrl=this.options.baseUrl||"",this.root=Array.isArray(e)?{path:"",children:e,parent:null}:e,this.root.parent=null}return s.prototype.resolve=function(t){var n,r,a=this,s=Object.assign({router:this},this.options.context,{},"string"==typeof t?{pathname:t}:t),o=function t(n,r,a,i,s){var o,l,c=0;return{next:function(u){if(n===u)return{done:!0,value:!1};if(!o){var d=n,p=!d.children;if(d.match||(d.match=e(d.path||"",Object.assign({end:p},a))),o=d.match(i)){var g=o.path;return o.path=p||"/"!==g.charAt(g.length-1)?g:g.substr(1),o.params=Object.assign({},s,{},o.params),{done:!1,value:{route:n,baseUrl:r,path:o.path,params:o.params}}}}if(o&&n.children)for(;c<n.children.length;){if(!l){var f=n.children[c];f.parent=n,l=t(f,r+o.path,a,i.substr(o.path.length),o.params)}var m=l.next(u);if(!m.done)return{done:!1,value:m.value};l=null,c++}return{done:!0,value:!1}}}}(this.root,this.baseUrl,this.options,s.pathname.substr(this.baseUrl.length)),l=this.options.resolveRoute||i,c=s;function u(e,t,a){void 0===t&&(t=!n.done&&n.value.route);var i=null===a&&!n.done&&n.value.route;if(n=r||o.next(i),r=null,!e&&(n.done||!function(e,t){for(var n=t;n;)if((n=n.parent)===e)return 1}(t,n.value.route)))return r=n,Promise.resolve(null);if(n.done){var d=new Error("Route not found");return d.status=404,Promise.reject(d)}return c=Object.assign({},s,{},n.value),Promise.resolve(l(c,n.value.params)).then((function(n){return null!=n?n:u(e,t,n)}))}return s.next=u,Promise.resolve().then((function(){return u(!0,a.root)})).catch((function(e){if(a.options.errorHandler)return a.options.errorHandler(e,c);throw e}))},s})),function(e){"use strict";function t(e){var t=e.length,r=n.type(e);return"function"!==r&&!n.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}if(!e.jQuery){var n=function(e,t){return new n.fn.init(e,t)};n.isWindow=function(e){return e&&e===e.window},n.type=function(e){return e?"object"==typeof e||"function"==typeof e?a[s.call(e)]||"object":typeof e:e+""},n.isArray=Array.isArray||function(e){return"array"===n.type(e)},n.isPlainObject=function(e){var t;if(!e||"object"!==n.type(e)||e.nodeType||n.isWindow(e))return!1;try{if(e.constructor&&!i.call(e,"constructor")&&!i.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(t in e);return void 0===t||i.call(e,t)},n.each=function(e,n,r){var a=0,i=e.length,s=t(e);if(r){if(s)for(;a<i&&!1!==n.apply(e[a],r);a++);else for(a in e)if(e.hasOwnProperty(a)&&!1===n.apply(e[a],r))break}else if(s)for(;a<i&&!1!==n.call(e[a],a,e[a]);a++);else for(a in e)if(e.hasOwnProperty(a)&&!1===n.call(e[a],a,e[a]))break;return e},n.data=function(e,t,a){if(void 0===a){var i=e[n.expando],s=i&&r[i];if(void 0===t)return s;if(s&&t in s)return s[t]}else if(void 0!==t){var o=e[n.expando]||(e[n.expando]=++n.uuid);return r[o]=r[o]||{},r[o][t]=a,a}},n.removeData=function(e,t){var a=e[n.expando],i=a&&r[a];i&&(t?n.each(t,(function(e,t){delete i[t]})):delete r[a])},n.extend=function(){var e,t,r,a,i,s,o=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[l]||{},l++),"object"!=typeof o&&"function"!==n.type(o)&&(o={}),l===c&&(o=this,l--);l<c;l++)if(i=arguments[l])for(a in i)i.hasOwnProperty(a)&&(e=o[a],o!==(r=i[a])&&(u&&r&&(n.isPlainObject(r)||(t=n.isArray(r)))?(t?(t=!1,s=e&&n.isArray(e)?e:[]):s=e&&n.isPlainObject(e)?e:{},o[a]=n.extend(u,s,r)):void 0!==r&&(o[a]=r)));return o},n.queue=function(e,r,a){if(e){r=(r||"fx")+"queue";var i=n.data(e,r);return a?(!i||n.isArray(a)?i=n.data(e,r,function(e,n){var r=[];return e&&(t(Object(e))?function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;)e[a++]=t[r++];if(n!=n)for(;void 0!==t[r];)e[a++]=t[r++];e.length=a}(r,"string"==typeof e?[e]:e):[].push.call(r,e)),r}(a)):i.push(a),i):i||[]}},n.dequeue=function(e,t){n.each(e.nodeType?[e]:e,(function(e,r){t=t||"fx";var a=n.queue(r,t),i=a.shift();"inprogress"===i&&(i=a.shift()),i&&("fx"===t&&a.unshift("inprogress"),i.call(r,(function(){n.dequeue(r,t)})))}))},n.fn=n.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){var e=this[0],t=function(e){for(var t=e.offsetParent;t&&"html"!==t.nodeName.toLowerCase()&&t.style&&"static"===t.style.position.toLowerCase();)t=t.offsetParent;return t||document}(e),r=this.offset(),a=/^(?:body|html)$/i.test(t.nodeName)?{top:0,left:0}:n(t).offset();return r.top-=parseFloat(e.style.marginTop)||0,r.left-=parseFloat(e.style.marginLeft)||0,t.style&&(a.top+=parseFloat(t.style.borderTopWidth)||0,a.left+=parseFloat(t.style.borderLeftWidth)||0),{top:r.top-a.top,left:r.left-a.left}}};var r={};n.expando="velocity"+(new Date).getTime(),n.uuid=0;for(var a={},i=a.hasOwnProperty,s=a.toString,o="Boolean Number String Function Array Date RegExp Object Error".split(" "),l=0;l<o.length;l++)a["[object "+o[l]+"]"]=o[l].toLowerCase();n.fn.init.prototype=n.fn,e.Velocity={Utilities:n}}}(window),function(e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";return function(e,t,n,r){function a(e){return b.isWrapped(e)?e=y.call(e):b.isNode(e)&&(e=[e]),e}function i(e){var t=g.data(e,"velocity");return null===t?r:t}function s(e,t){var n=i(e);n&&n.delayTimer&&!n.delayPaused&&(n.delayRemaining=n.delay-t+n.delayBegin,n.delayPaused=!0,clearTimeout(n.delayTimer.setTimeout))}function o(e,t){var n=i(e);n&&n.delayTimer&&n.delayPaused&&(n.delayPaused=!1,n.delayTimer.setTimeout=setTimeout(n.delayTimer.next,n.delayRemaining))}function l(e){return function(t){return Math.round(t*e)*(1/e)}}function c(e,n,r,a){function i(e,t){return 1-3*t+3*e}function s(e,t){return 3*t-6*e}function o(e){return 3*e}function l(e,t,n){return((i(t,n)*e+s(t,n))*e+o(t))*e}function c(e,t,n){return 3*i(t,n)*e*e+2*s(t,n)*e+o(t)}function u(t,n){for(var a=0;a<m;++a){var i=c(n,e,r);if(0===i)return n;n-=(l(n,e,r)-t)/i}return n}function d(){for(var t=0;t<b;++t)x[t]=l(t*V,e,r)}function p(t,n,a){var i,s,o=0;do{(i=l(s=n+(a-n)/2,e,r)-t)>0?a=s:n=s}while(Math.abs(i)>y&&++o<v);return s}function g(t){for(var n=0,a=1,i=b-1;a!==i&&x[a]<=t;++a)n+=V;--a;var s=n+(t-x[a])/(x[a+1]-x[a])*V,o=c(s,e,r);return o>=h?u(t,s):0===o?s:p(t,n,n+V)}function f(){E=!0,e===n&&r===a||d()}var m=4,h=.001,y=1e-7,v=10,b=11,V=1/(b-1),w="Float32Array"in t;if(4!==arguments.length)return!1;for(var S=0;S<4;++S)if("number"!=typeof arguments[S]||isNaN(arguments[S])||!isFinite(arguments[S]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var x=w?new Float32Array(b):new Array(b),E=!1,P=function(t){return E||f(),e===n&&r===a?t:0===t?0:1===t?1:l(g(t),n,a)};P.getControlPoints=function(){return[{x:e,y:n},{x:r,y:a}]};var k="generateBezier("+[e,n,r,a]+")";return P.toString=function(){return k},P}function u(e,t){var n=e;return b.isString(e)?x.Easings[e]||(n=!1):n=b.isArray(e)&&1===e.length?l.apply(null,e):b.isArray(e)&&2===e.length?E.apply(null,e.concat([t])):!(!b.isArray(e)||4!==e.length)&&c.apply(null,e),!1===n&&(n=x.Easings[x.defaults.easing]?x.defaults.easing:S),n}function d(e){if(e){var t=x.timestamp&&!0!==e?e:h.now(),n=x.State.calls.length;n>1e4&&(x.State.calls=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var a=e[t];a&&r.push(a)}return r}(x.State.calls),n=x.State.calls.length);for(var a=0;a<n;a++)if(x.State.calls[a]){var s=x.State.calls[a],o=s[0],l=s[2],c=s[3],u=!c,m=null,y=s[5],v=s[6];if(c||(c=x.State.calls[a][3]=t-16),y){if(!0!==y.resume)continue;c=s[3]=Math.round(t-v-16),s[5]=null}v=s[6]=t-c;for(var V=Math.min(v/l.duration,1),w=0,S=o.length;w<S;w++){var E=o[w],k=E.element;if(i(k)){var C=!1;if(l.display!==r&&null!==l.display&&"none"!==l.display){if("flex"===l.display){g.each(["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"],(function(e,t){P.setPropertyValue(k,"display",t)}))}P.setPropertyValue(k,"display",l.display)}for(var N in l.visibility!==r&&"hidden"!==l.visibility&&P.setPropertyValue(k,"visibility",l.visibility),E)if(E.hasOwnProperty(N)&&"element"!==N){var A,I=E[N],L=b.isString(I.easing)?x.Easings[I.easing]:I.easing;if(b.isString(I.pattern)){var j=1===V?function(e,t,n){var r=I.endValue[t];return n?Math.round(r):r}:function(e,t,n){var r=I.startValue[t],a=I.endValue[t]-r,i=r+a*L(V,l,a);return n?Math.round(i):i};A=I.pattern.replace(/{(\d+)(!)?}/g,j)}else if(1===V)A=I.endValue;else{var O=I.endValue-I.startValue;A=I.startValue+O*L(V,l,O)}if(!u&&A===I.currentValue)continue;if(I.currentValue=A,"tween"===N)m=A;else{var F;if(P.Hooks.registered[N]){F=P.Hooks.getRoot(N);var q=i(k).rootPropertyValueCache[F];q&&(I.rootPropertyValue=q)}var D=P.setPropertyValue(k,N,I.currentValue+(f<9&&0===parseFloat(A)?"":I.unitType),I.rootPropertyValue,I.scrollData);P.Hooks.registered[N]&&(P.Normalizations.registered[F]?i(k).rootPropertyValueCache[F]=P.Normalizations.registered[F]("extract",null,D[1]):i(k).rootPropertyValueCache[F]=D[1]),"transform"===D[0]&&(C=!0)}}l.mobileHA&&i(k).transformCache.translate3d===r&&(i(k).transformCache.translate3d="(0px, 0px, 0px)",C=!0),C&&P.flushTransformCache(k)}}l.display!==r&&"none"!==l.display&&(x.State.calls[a][2].display=!1),l.visibility!==r&&"hidden"!==l.visibility&&(x.State.calls[a][2].visibility=!1),l.progress&&l.progress.call(s[1],s[1],V,Math.max(0,c+l.duration-t),c,m),1===V&&p(a)}}x.State.isTicking&&T(d)}function p(e,t){if(!x.State.calls[e])return!1;for(var n=x.State.calls[e][0],a=x.State.calls[e][1],s=x.State.calls[e][2],o=x.State.calls[e][4],l=!1,c=0,u=n.length;c<u;c++){var d=n[c].element;t||s.loop||("none"===s.display&&P.setPropertyValue(d,"display",s.display),"hidden"===s.visibility&&P.setPropertyValue(d,"visibility",s.visibility));var p=i(d);if(!0!==s.loop&&(g.queue(d)[1]===r||!/\.velocityQueueEntryFlag/i.test(g.queue(d)[1]))&&p){p.isAnimating=!1,p.rootPropertyValueCache={};var f=!1;g.each(P.Lists.transforms3D,(function(e,t){var n=/^scale/.test(t)?1:0,a=p.transformCache[t];p.transformCache[t]!==r&&new RegExp("^\\("+n+"[^.]").test(a)&&(f=!0,delete p.transformCache[t])})),s.mobileHA&&(f=!0,delete p.transformCache.translate3d),f&&P.flushTransformCache(d),P.Values.removeClass(d,"velocity-animating")}if(!t&&s.complete&&!s.loop&&c===u-1)try{s.complete.call(a,a)}catch(e){setTimeout((function(){throw e}),1)}o&&!0!==s.loop&&o(a),p&&!0===s.loop&&!t&&(g.each(p.tweensContainer,(function(e,t){if(/^rotate/.test(e)&&(parseFloat(t.startValue)-parseFloat(t.endValue))%360==0){var n=t.startValue;t.startValue=t.endValue,t.endValue=n}/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)})),x(d,"reverse",{loop:!0,delay:s.delay})),!1!==s.queue&&g.dequeue(d,s.queue)}x.State.calls[e]=!1;for(var m=0,h=x.State.calls.length;m<h;m++)if(!1!==x.State.calls[m]){l=!0;break}!1===l&&(x.State.isTicking=!1,delete x.State.calls,x.State.calls=[])}var g,f=function(){if(n.documentMode)return n.documentMode;for(var e=7;e>4;e--){var t=n.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e}return r}(),m=function(){var e=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var n,r=(new Date).getTime();return n=Math.max(0,16-(r-e)),e=r+n,setTimeout((function(){t(r+n)}),n)}}(),h=function(){var e=t.performance||{};if("function"!=typeof e.now){var n=e.timing&&e.timing.navigationStart?e.timing.navigationStart:(new Date).getTime();e.now=function(){return(new Date).getTime()-n}}return e}(),y=function(){var e=Array.prototype.slice;try{return e.call(n.documentElement),e}catch(t){return function(t,n){var r=this.length;if("number"!=typeof t&&(t=0),"number"!=typeof n&&(n=r),this.slice)return e.call(this,t,n);var a,i=[],s=t>=0?t:Math.max(0,r+t),o=(n<0?r+n:Math.min(n,r))-s;if(o>0)if(i=new Array(o),this.charAt)for(a=0;a<o;a++)i[a]=this.charAt(s+a);else for(a=0;a<o;a++)i[a]=this[s+a];return i}}}(),v=function(){return Array.prototype.includes?function(e,t){return e.includes(t)}:Array.prototype.indexOf?function(e,t){return e.indexOf(t)>=0}:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}},b={isNumber:function(e){return"number"==typeof e},isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isWrapped:function(e){return e&&e!==t&&b.isNumber(e.length)&&!b.isString(e)&&!b.isFunction(e)&&!b.isNode(e)&&(0===e.length||b.isNode(e[0]))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},V=!1;if(e.fn&&e.fn.jquery?(g=e,V=!0):g=t.Velocity.Utilities,f<=8&&!V)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(!(f<=7)){var w=400,S="swing",x={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t.navigator.userAgent),isAndroid:/Android/i.test(t.navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(t.navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(t.navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[],delayedElements:{count:0}},CSS:{},Utilities:g,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:w,easing:S,begin:r,complete:r,progress:r,display:r,visibility:r,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0,promiseRejectEmpty:!0},init:function(e){g.data(e,"velocity",{isSVG:b.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:5,patch:2},debug:!1,timestamp:!0,pauseAll:function(e){var t=(new Date).getTime();g.each(x.State.calls,(function(t,n){if(n){if(e!==r&&(n[2].queue!==e||!1===n[2].queue))return!0;n[5]={resume:!1}}})),g.each(x.State.delayedElements,(function(e,n){n&&s(n,t)}))},resumeAll:function(e){(new Date).getTime();g.each(x.State.calls,(function(t,n){if(n){if(e!==r&&(n[2].queue!==e||!1===n[2].queue))return!0;n[5]&&(n[5].resume=!0)}})),g.each(x.State.delayedElements,(function(e,t){t&&o(t)}))}};t.pageYOffset!==r?(x.State.scrollAnchor=t,x.State.scrollPropertyLeft="pageXOffset",x.State.scrollPropertyTop="pageYOffset"):(x.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,x.State.scrollPropertyLeft="scrollLeft",x.State.scrollPropertyTop="scrollTop");var E=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var a={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:a.v,dv:e(a)}}function n(n,r){var a={dx:n.v,dv:e(n)},i=t(n,.5*r,a),s=t(n,.5*r,i),o=t(n,r,s),l=1/6*(a.dx+2*(i.dx+s.dx)+o.dx),c=1/6*(a.dv+2*(i.dv+s.dv)+o.dv);return n.x=n.x+l*r,n.v=n.v+c*r,n}return function e(t,r,a){var i,s,o,l={x:-1,v:0,tension:null,friction:null},c=[0],u=0;for(t=parseFloat(t)||500,r=parseFloat(r)||20,a=a||null,l.tension=t,l.friction=r,(i=null!==a)?s=(u=e(t,r))/a*.016:s=.016;o=n(o||l,s),c.push(1+o.x),u+=16,Math.abs(o.x)>1e-4&&Math.abs(o.v)>1e-4;);return i?function(e){return c[e*(c.length-1)|0]}:u}}();x.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},g.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],(function(e,t){x.Easings[t[0]]=c.apply(null,t[1])}));var P=x.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"],units:["%","em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","Q","in","pc","pt","px","deg","grad","rad","turn","s","ms"],colorNames:{aliceblue:"240,248,255",antiquewhite:"250,235,215",aquamarine:"127,255,212",aqua:"0,255,255",azure:"240,255,255",beige:"245,245,220",bisque:"255,228,196",black:"0,0,0",blanchedalmond:"255,235,205",blueviolet:"138,43,226",blue:"0,0,255",brown:"165,42,42",burlywood:"222,184,135",cadetblue:"95,158,160",chartreuse:"127,255,0",chocolate:"210,105,30",coral:"255,127,80",cornflowerblue:"100,149,237",cornsilk:"255,248,220",crimson:"220,20,60",cyan:"0,255,255",darkblue:"0,0,139",darkcyan:"0,139,139",darkgoldenrod:"184,134,11",darkgray:"169,169,169",darkgrey:"169,169,169",darkgreen:"0,100,0",darkkhaki:"189,183,107",darkmagenta:"139,0,139",darkolivegreen:"85,107,47",darkorange:"255,140,0",darkorchid:"153,50,204",darkred:"139,0,0",darksalmon:"233,150,122",darkseagreen:"143,188,143",darkslateblue:"72,61,139",darkslategray:"47,79,79",darkturquoise:"0,206,209",darkviolet:"148,0,211",deeppink:"255,20,147",deepskyblue:"0,191,255",dimgray:"105,105,105",dimgrey:"105,105,105",dodgerblue:"30,144,255",firebrick:"178,34,34",floralwhite:"255,250,240",forestgreen:"34,139,34",fuchsia:"255,0,255",gainsboro:"220,220,220",ghostwhite:"248,248,255",gold:"255,215,0",goldenrod:"218,165,32",gray:"128,128,128",grey:"128,128,128",greenyellow:"173,255,47",green:"0,128,0",honeydew:"240,255,240",hotpink:"255,105,180",indianred:"205,92,92",indigo:"75,0,130",ivory:"255,255,240",khaki:"240,230,140",lavenderblush:"255,240,245",lavender:"230,230,250",lawngreen:"124,252,0",lemonchiffon:"255,250,205",lightblue:"173,216,230",lightcoral:"240,128,128",lightcyan:"224,255,255",lightgoldenrodyellow:"250,250,210",lightgray:"211,211,211",lightgrey:"211,211,211",lightgreen:"144,238,144",lightpink:"255,182,193",lightsalmon:"255,160,122",lightseagreen:"32,178,170",lightskyblue:"135,206,250",lightslategray:"119,136,153",lightsteelblue:"176,196,222",lightyellow:"255,255,224",limegreen:"50,205,50",lime:"0,255,0",linen:"250,240,230",magenta:"255,0,255",maroon:"128,0,0",mediumaquamarine:"102,205,170",mediumblue:"0,0,205",mediumorchid:"186,85,211",mediumpurple:"147,112,219",mediumseagreen:"60,179,113",mediumslateblue:"123,104,238",mediumspringgreen:"0,250,154",mediumturquoise:"72,209,204",mediumvioletred:"199,21,133",midnightblue:"25,25,112",mintcream:"245,255,250",mistyrose:"255,228,225",moccasin:"255,228,181",navajowhite:"255,222,173",navy:"0,0,128",oldlace:"253,245,230",olivedrab:"107,142,35",olive:"128,128,0",orangered:"255,69,0",orange:"255,165,0",orchid:"218,112,214",palegoldenrod:"238,232,170",palegreen:"152,251,152",paleturquoise:"175,238,238",palevioletred:"219,112,147",papayawhip:"255,239,213",peachpuff:"255,218,185",peru:"205,133,63",pink:"255,192,203",plum:"221,160,221",powderblue:"176,224,230",purple:"128,0,128",red:"255,0,0",rosybrown:"188,143,143",royalblue:"65,105,225",saddlebrown:"139,69,19",salmon:"250,128,114",sandybrown:"244,164,96",seagreen:"46,139,87",seashell:"255,245,238",sienna:"160,82,45",silver:"192,192,192",skyblue:"135,206,235",slateblue:"106,90,205",slategray:"112,128,144",snow:"255,250,250",springgreen:"0,255,127",steelblue:"70,130,180",tan:"210,180,140",teal:"0,128,128",thistle:"216,191,216",tomato:"255,99,71",turquoise:"64,224,208",violet:"238,130,238",wheat:"245,222,179",whitesmoke:"245,245,245",white:"255,255,255",yellowgreen:"154,205,50",yellow:"255,255,0"}},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<P.Lists.colors.length;e++){var t="color"===P.Lists.colors[e]?"0 0 0 1":"255 255 255 1";P.Hooks.templates[P.Lists.colors[e]]=["Red Green Blue Alpha",t]}var n,r,a;if(f)for(n in P.Hooks.templates)if(P.Hooks.templates.hasOwnProperty(n)){a=(r=P.Hooks.templates[n])[0].split(" ");var i=r[1].match(P.RegEx.valueSplit);"Color"===a[0]&&(a.push(a.shift()),i.push(i.shift()),P.Hooks.templates[n]=[a.join(" "),i.join(" ")])}for(n in P.Hooks.templates)if(P.Hooks.templates.hasOwnProperty(n))for(var s in a=(r=P.Hooks.templates[n])[0].split(" "))if(a.hasOwnProperty(s)){var o=n+a[s],l=s;P.Hooks.registered[o]=[n,l]}},getRoot:function(e){var t=P.Hooks.registered[e];return t?t[0]:e},getUnit:function(e,t){var n=(e.substr(t||0,5).match(/^[a-z%]+/)||[])[0]||"";return n&&v(P.Lists.units)?n:""},fixColors:function(e){return e.replace(/(rgba?\(\s*)?(\b[a-z]+\b)/g,(function(e,t,n){return P.Lists.colorNames.hasOwnProperty(n)?(t||"rgba(")+P.Lists.colorNames[n]+(t?"":",1)"):t+n}))},cleanRootPropertyValue:function(e,t){return P.RegEx.valueUnwrap.test(t)&&(t=t.match(P.RegEx.valueUnwrap)[1]),P.Values.isCSSNullValue(t)&&(t=P.Hooks.templates[e][1]),t},extractValue:function(e,t){var n=P.Hooks.registered[e];if(n){var r=n[0],a=n[1];return(t=P.Hooks.cleanRootPropertyValue(r,t)).toString().match(P.RegEx.valueSplit)[a]}return t},injectValue:function(e,t,n){var r=P.Hooks.registered[e];if(r){var a,i=r[0],s=r[1];return(a=(n=P.Hooks.cleanRootPropertyValue(i,n)).toString().match(P.RegEx.valueSplit))[s]=t,a.join(" ")}return n}},Normalizations:{registered:{clip:function(e,t,n){switch(e){case"name":return"clip";case"extract":var r;return P.RegEx.wrappedValueAlreadyExtracted.test(n)?r=n:r=(r=n.toString().match(P.RegEx.valueUnwrap))?r[1].replace(/,(\s+)?/g," "):n,r;case"inject":return"rect("+n+")"}},blur:function(e,t,n){switch(e){case"name":return x.State.isFirefox?"filter":"-webkit-filter";case"extract":var r=parseFloat(n);if(!r&&0!==r){var a=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);r=a?a[1]:0}return r;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(e,t,n){if(f<=8)switch(e){case"name":return"filter";case"extract":var r=n.toString().match(/alpha\(opacity=(.*)\)/i);return r?r[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(e){case"name":return"opacity";case"extract":case"inject":return n}}},register:function(){function e(e,t,n){if("border-box"===P.getPropertyValue(t,"boxSizing").toString().toLowerCase()===(n||!1)){var r,a,i=0,s="width"===e?["Left","Right"]:["Top","Bottom"],o=["padding"+s[0],"padding"+s[1],"border"+s[0]+"Width","border"+s[1]+"Width"];for(r=0;r<o.length;r++)a=parseFloat(P.getPropertyValue(t,o[r])),isNaN(a)||(i+=a);return n?-i:i}return 0}function t(t,n){return function(r,a,i){switch(r){case"name":return t;case"extract":return parseFloat(i)+e(t,a,n);case"inject":return parseFloat(i)-e(t,a,n)+"px"}}}f&&!(f>9)||x.State.isGingerbread||(P.Lists.transformsBase=P.Lists.transformsBase.concat(P.Lists.transforms3D));for(var n=0;n<P.Lists.transformsBase.length;n++)!function(){var e=P.Lists.transformsBase[n];P.Normalizations.registered[e]=function(t,n,a){switch(t){case"name":return"transform";case"extract":return i(n)===r||i(n).transformCache[e]===r?/^scale/i.test(e)?1:0:i(n).transformCache[e].replace(/[()]/g,"");case"inject":var s=!1;switch(e.substr(0,e.length-1)){case"translate":s=!/(%|px|em|rem|vw|vh|\d)$/i.test(a);break;case"scal":case"scale":x.State.isAndroid&&i(n).transformCache[e]===r&&a<1&&(a=1),s=!/(\d)$/i.test(a);break;case"skew":case"rotate":s=!/(deg|\d)$/i.test(a)}return s||(i(n).transformCache[e]="("+a+")"),i(n).transformCache[e]}}}();for(var a=0;a<P.Lists.colors.length;a++)!function(){var e=P.Lists.colors[a];P.Normalizations.registered[e]=function(t,n,a){switch(t){case"name":return e;case"extract":var i;if(P.RegEx.wrappedValueAlreadyExtracted.test(a))i=a;else{var s,o={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(a)?s=o[a]!==r?o[a]:o.black:P.RegEx.isHex.test(a)?s="rgb("+P.Values.hexToRgb(a).join(" ")+")":/^rgba?\(/i.test(a)||(s=o.black),i=(s||a).toString().match(P.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return(!f||f>8)&&3===i.split(" ").length&&(i+=" 1"),i;case"inject":return/^rgb/.test(a)?a:(f<=8?4===a.split(" ").length&&(a=a.split(/\s+/).slice(0,3).join(" ")):3===a.split(" ").length&&(a+=" 1"),(f<=8?"rgb":"rgba")+"("+a.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")")}}}();P.Normalizations.registered.innerWidth=t("width",!0),P.Normalizations.registered.innerHeight=t("height",!0),P.Normalizations.registered.outerWidth=t("width"),P.Normalizations.registered.outerHeight=t("height")}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}))},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(f||x.State.isAndroid&&!x.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(x.State.prefixMatches[e])return[x.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],n=0,r=t.length;n<r;n++){var a;if(a=0===n?e:t[n]+e.replace(/^\w/,(function(e){return e.toUpperCase()})),b.isString(x.State.prefixElement.style[a]))return x.State.prefixMatches[e]=a,[a,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t;return e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return!e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){if(e)if(e.classList)e.classList.add(t);else if(b.isString(e.className))e.className+=(e.className.length?" ":"")+t;else{var n=e.getAttribute(f<=7?"className":"class")||"";e.setAttribute("class",n+(n?" ":"")+t)}},removeClass:function(e,t){if(e)if(e.classList)e.classList.remove(t);else if(b.isString(e.className))e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ");else{var n=e.getAttribute(f<=7?"className":"class")||"";e.setAttribute("class",n.replace(new RegExp("(^|s)"+t.split(" ").join("|")+"(s|$)","gi")," "))}}},getPropertyValue:function(e,n,a,s){function o(e,n){var a=0;if(f<=8)a=g.css(e,n);else{var l=!1;/^(width|height)$/.test(n)&&0===P.getPropertyValue(e,"display")&&(l=!0,P.setPropertyValue(e,"display",P.Values.getDisplayType(e)));var c,u=function(){l&&P.setPropertyValue(e,"display","none")};if(!s){if("height"===n&&"border-box"!==P.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var d=e.offsetHeight-(parseFloat(P.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(P.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(P.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(P.getPropertyValue(e,"paddingBottom"))||0);return u(),d}if("width"===n&&"border-box"!==P.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var p=e.offsetWidth-(parseFloat(P.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(P.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(P.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(P.getPropertyValue(e,"paddingRight"))||0);return u(),p}}c=i(e)===r?t.getComputedStyle(e,null):i(e).computedStyle?i(e).computedStyle:i(e).computedStyle=t.getComputedStyle(e,null),"borderColor"===n&&(n="borderTopColor"),""!==(a=9===f&&"filter"===n?c.getPropertyValue(n):c[n])&&null!==a||(a=e.style[n]),u()}if("auto"===a&&/^(top|right|bottom|left)$/i.test(n)){var m=o(e,"position");("fixed"===m||"absolute"===m&&/top|left/i.test(n))&&(a=g(e).position()[n]+"px")}return a}var l;if(P.Hooks.registered[n]){var c=n,u=P.Hooks.getRoot(c);a===r&&(a=P.getPropertyValue(e,P.Names.prefixCheck(u)[0])),P.Normalizations.registered[u]&&(a=P.Normalizations.registered[u]("extract",e,a)),l=P.Hooks.extractValue(c,a)}else if(P.Normalizations.registered[n]){var d,p;"transform"!==(d=P.Normalizations.registered[n]("name",e))&&(p=o(e,P.Names.prefixCheck(d)[0]),P.Values.isCSSNullValue(p)&&P.Hooks.templates[n]&&(p=P.Hooks.templates[n][1])),l=P.Normalizations.registered[n]("extract",e,p)}if(!/^[\d-]/.test(l)){var m=i(e);if(m&&m.isSVG&&P.Names.SVGAttribute(n))if(/^(height|width)$/i.test(n))try{l=e.getBBox()[n]}catch(e){l=0}else l=e.getAttribute(n);else l=o(e,P.Names.prefixCheck(n)[0])}return P.Values.isCSSNullValue(l)&&(l=0),x.debug>=2&&console.log("Get "+n+": "+l),l},setPropertyValue:function(e,n,r,a,s){var o=n;if("scroll"===n)s.container?s.container["scroll"+s.direction]=r:"Left"===s.direction?t.scrollTo(r,s.alternateValue):t.scrollTo(s.alternateValue,r);else if(P.Normalizations.registered[n]&&"transform"===P.Normalizations.registered[n]("name",e))P.Normalizations.registered[n]("inject",e,r),o="transform",r=i(e).transformCache[n];else{if(P.Hooks.registered[n]){var l=n,c=P.Hooks.getRoot(n);a=a||P.getPropertyValue(e,c),r=P.Hooks.injectValue(l,r,a),n=c}if(P.Normalizations.registered[n]&&(r=P.Normalizations.registered[n]("inject",e,r),n=P.Normalizations.registered[n]("name",e)),o=P.Names.prefixCheck(n)[0],f<=8)try{e.style[o]=r}catch(e){x.debug&&console.log("Browser does not support ["+r+"] for ["+o+"]")}else{var u=i(e);u&&u.isSVG&&P.Names.SVGAttribute(n)?e.setAttribute(n,r):e.style[o]=r}x.debug>=2&&console.log("Set "+n+" ("+o+"): "+r)}return[o,r]},flushTransformCache:function(e){var t="",n=i(e);if((f||x.State.isAndroid&&!x.State.isChrome)&&n&&n.isSVG){var r=function(t){return parseFloat(P.getPropertyValue(e,t))},a={translate:[r("translateX"),r("translateY")],skewX:[r("skewX")],skewY:[r("skewY")],scale:1!==r("scale")?[r("scale"),r("scale")]:[r("scaleX"),r("scaleY")],rotate:[r("rotateZ"),0,0]};g.each(i(e).transformCache,(function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),a[e]&&(t+=e+"("+a[e].join(" ")+") ",delete a[e])}))}else{var s,o;g.each(i(e).transformCache,(function(n){if(s=i(e).transformCache[n],"transformPerspective"===n)return o=s,!0;9===f&&"rotateZ"===n&&(n="rotate"),t+=n+s+" "})),o&&(t="perspective"+o+" "+t)}P.setPropertyValue(e,"transform",t)}};P.Hooks.register(),P.Normalizations.register(),x.hook=function(e,t,n){var s;return e=a(e),g.each(e,(function(e,a){if(i(a)===r&&x.init(a),n===r)s===r&&(s=P.getPropertyValue(a,t));else{var o=P.setPropertyValue(a,t,n);"transform"===o[0]&&x.CSS.flushTransformCache(a),s=o}})),s};var k=function(){function e(){return f?T.promise||null:m}function l(e,a){function s(s){var p,f;if(l.begin&&0===A)try{l.begin.call(y,y)}catch(e){setTimeout((function(){throw e}),1)}if("scroll"===C){var m,h,w,E=/^x$/i.test(l.axis)?"Left":"Top",k=parseFloat(l.offset)||0;l.container?b.isWrapped(l.container)||b.isNode(l.container)?(l.container=l.container[0]||l.container,w=(m=l.container["scroll"+E])+g(e).position()[E.toLowerCase()]+k):l.container=null:(m=x.State.scrollAnchor[x.State["scrollProperty"+E]],h=x.State.scrollAnchor[x.State["scrollProperty"+("Left"===E?"Top":"Left")]],w=g(e).offset()[E.toLowerCase()]+k),c={scroll:{rootPropertyValue:!1,startValue:m,currentValue:m,endValue:w,unitType:"",easing:l.easing,scrollData:{container:l.container,direction:E,alternateValue:h}},element:e},x.debug&&console.log("tweensContainer (scroll): ",c.scroll,e)}else if("reverse"===C){if(!(p=i(e)))return;if(!p.tweensContainer)return void g.dequeue(e,l.queue);for(var I in"none"===p.opts.display&&(p.opts.display="auto"),"hidden"===p.opts.visibility&&(p.opts.visibility="visible"),p.opts.loop=!1,p.opts.begin=null,p.opts.complete=null,S.easing||delete l.easing,S.duration||delete l.duration,l=g.extend({},p.opts,l),f=g.extend(!0,{},p?p.tweensContainer:null))if(f.hasOwnProperty(I)&&"element"!==I){var L=f[I].startValue;f[I].startValue=f[I].currentValue=f[I].endValue,f[I].endValue=L,b.isEmptyObject(S)||(f[I].easing=l.easing),x.debug&&console.log("reverse tweensContainer ("+I+"): "+JSON.stringify(f[I]),e)}c=f}else if("start"===C){(p=i(e))&&p.tweensContainer&&!0===p.isAnimating&&(f=p.tweensContainer);var j=function(a,i){var s,u=P.Hooks.getRoot(a),d=!1,m=i[0],h=i[1],y=i[2];if(p&&p.isSVG||"tween"===u||!1!==P.Names.prefixCheck(u)[1]||P.Normalizations.registered[u]!==r){(l.display!==r&&null!==l.display&&"none"!==l.display||l.visibility!==r&&"hidden"!==l.visibility)&&/opacity|filter/.test(a)&&!y&&0!==m&&(y=0),l._cacheValues&&f&&f[a]?(y===r&&(y=f[a].endValue+f[a].unitType),d=p.rootPropertyValueCache[u]):P.Hooks.registered[a]?y===r?(d=P.getPropertyValue(e,u),y=P.getPropertyValue(e,a,d)):d=P.Hooks.templates[u][1]:y===r&&(y=P.getPropertyValue(e,a));var v,V,w,S=!1,E=function(e,t){var n,r;return r=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,(function(e){return n=e,""})),n||(n=P.Values.getUnitType(e)),[r,n]};if(y!==m&&b.isString(y)&&b.isString(m)){s="";var k=0,T=0,C=[],N=[],A=0,I=0,L=0;for(y=P.Hooks.fixColors(y),m=P.Hooks.fixColors(m);k<y.length&&T<m.length;){var j=y[k],O=m[T];if(/[\d\.-]/.test(j)&&/[\d\.-]/.test(O)){for(var F=j,q=O,D=".",U=".";++k<y.length;){if((j=y[k])===D)D="..";else if(!/\d/.test(j))break;F+=j}for(;++T<m.length;){if((O=m[T])===U)U="..";else if(!/\d/.test(O))break;q+=O}var H=P.Hooks.getUnit(y,k),B=P.Hooks.getUnit(m,T);if(k+=H.length,T+=B.length,H===B)F===q?s+=F+H:(s+="{"+C.length+(I?"!":"")+"}"+H,C.push(parseFloat(F)),N.push(parseFloat(q)));else{var M=parseFloat(F),z=parseFloat(q);s+=(A<5?"calc":"")+"("+(M?"{"+C.length+(I?"!":"")+"}":"0")+H+" + "+(z?"{"+(C.length+(M?1:0))+(I?"!":"")+"}":"0")+B+")",M&&(C.push(M),N.push(0)),z&&(C.push(0),N.push(z))}}else{if(j!==O){A=0;break}s+=j,k++,T++,0===A&&"c"===j||1===A&&"a"===j||2===A&&"l"===j||3===A&&"c"===j||A>=4&&"("===j?A++:(A&&A<5||A>=4&&")"===j&&--A<5)&&(A=0),0===I&&"r"===j||1===I&&"g"===j||2===I&&"b"===j||3===I&&"a"===j||I>=3&&"("===j?(3===I&&"a"===j&&(L=1),I++):L&&","===j?++L>3&&(I=L=0):(L&&I<(L?5:4)||I>=(L?4:3)&&")"===j&&--I<(L?5:4))&&(I=L=0)}}k===y.length&&T===m.length||(x.debug&&console.error('Trying to pattern match mis-matched strings ["'+m+'", "'+y+'"]'),s=r),s&&(C.length?(x.debug&&console.log('Pattern found "'+s+'" -> ',C,N,"["+y+","+m+"]"),y=C,m=N,V=w=""):s=r)}if(s||(y=(v=E(a,y))[0],w=v[1],m=(v=E(a,m))[0].replace(/^([+-\/*])=/,(function(e,t){return S=t,""})),V=v[1],y=parseFloat(y)||0,m=parseFloat(m)||0,"%"===V&&(/^(fontSize|lineHeight)$/.test(a)?(m/=100,V="em"):/^scale/.test(a)?(m/=100,V=""):/(Red|Green|Blue)$/i.test(a)&&(m=m/100*255,V=""))),/[\/*]/.test(S))V=w;else if(w!==V&&0!==y)if(0===m)V=w;else{o=o||function(){var r={myParent:e.parentNode||n.body,position:P.getPropertyValue(e,"position"),fontSize:P.getPropertyValue(e,"fontSize")},a=r.position===R.lastPosition&&r.myParent===R.lastParent,i=r.fontSize===R.lastFontSize;R.lastParent=r.myParent,R.lastPosition=r.position,R.lastFontSize=r.fontSize;var s={};if(i&&a)s.emToPx=R.lastEmToPx,s.percentToPxWidth=R.lastPercentToPxWidth,s.percentToPxHeight=R.lastPercentToPxHeight;else{var o=p&&p.isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");x.init(o),r.myParent.appendChild(o),g.each(["overflow","overflowX","overflowY"],(function(e,t){x.CSS.setPropertyValue(o,t,"hidden")})),x.CSS.setPropertyValue(o,"position",r.position),x.CSS.setPropertyValue(o,"fontSize",r.fontSize),x.CSS.setPropertyValue(o,"boxSizing","content-box"),g.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],(function(e,t){x.CSS.setPropertyValue(o,t,"100%")})),x.CSS.setPropertyValue(o,"paddingLeft","100em"),s.percentToPxWidth=R.lastPercentToPxWidth=(parseFloat(P.getPropertyValue(o,"width",null,!0))||1)/100,s.percentToPxHeight=R.lastPercentToPxHeight=(parseFloat(P.getPropertyValue(o,"height",null,!0))||1)/100,s.emToPx=R.lastEmToPx=(parseFloat(P.getPropertyValue(o,"paddingLeft"))||1)/100,r.myParent.removeChild(o)}return null===R.remToPx&&(R.remToPx=parseFloat(P.getPropertyValue(n.body,"fontSize"))||16),null===R.vwToPx&&(R.vwToPx=parseFloat(t.innerWidth)/100,R.vhToPx=parseFloat(t.innerHeight)/100),s.remToPx=R.remToPx,s.vwToPx=R.vwToPx,s.vhToPx=R.vhToPx,x.debug>=1&&console.log("Unit ratios: "+JSON.stringify(s),e),s}();var $=/margin|padding|left|right|width|text|word|letter/i.test(a)||/X$/.test(a)||"x"===a?"x":"y";switch(w){case"%":y*="x"===$?o.percentToPxWidth:o.percentToPxHeight;break;case"px":break;default:y*=o[w+"ToPx"]}switch(V){case"%":y*=1/("x"===$?o.percentToPxWidth:o.percentToPxHeight);break;case"px":break;default:y*=1/o[V+"ToPx"]}}switch(S){case"+":m=y+m;break;case"-":m=y-m;break;case"*":m*=y;break;case"/":m=y/m}c[a]={rootPropertyValue:d,startValue:y,currentValue:y,endValue:m,unitType:V,easing:h},s&&(c[a].pattern=s),x.debug&&console.log("tweensContainer ("+a+"): "+JSON.stringify(c[a]),e)}else x.debug&&console.log("Skipping ["+u+"] due to a lack of browser support.")};for(var O in V)if(V.hasOwnProperty(O)){var F=P.Names.camelCase(O),q=function(t,n){var r,i,s;return b.isFunction(t)&&(t=t.call(e,a,N)),b.isArray(t)?(r=t[0],!b.isArray(t[1])&&/^[\d-]/.test(t[1])||b.isFunction(t[1])||P.RegEx.isHex.test(t[1])?s=t[1]:b.isString(t[1])&&!P.RegEx.isHex.test(t[1])&&x.Easings[t[1]]||b.isArray(t[1])?(i=u(t[1],l.duration),s=t[2]):s=t[1]||t[2]):r=t,i=i||l.easing,b.isFunction(r)&&(r=r.call(e,a,N)),b.isFunction(s)&&(s=s.call(e,a,N)),[r||0,i,s]}(V[O]);if(v(P.Lists.colors)){var D=q[0],H=q[1],B=q[2];if(P.RegEx.isHex.test(D)){for(var M=["Red","Green","Blue"],z=P.Values.hexToRgb(D),$=B?P.Values.hexToRgb(B):r,W=0;W<M.length;W++){var _=[z[W]];H&&_.push(H),$!==r&&_.push($[W]),j(F+M[W],_)}continue}}j(F,q)}c.element=e}c.element&&(P.Values.addClass(e,"velocity-animating"),U.push(c),(p=i(e))&&(""===l.queue&&(p.tweensContainer=c,p.opts=l),p.isAnimating=!0),A===N-1?(x.State.calls.push([U,y,l,null,T.resolver,null,0]),!1===x.State.isTicking&&(x.State.isTicking=!0,d())):A++)}var o,l=g.extend({},x.defaults,S),c={};switch(i(e)===r&&x.init(e),parseFloat(l.delay)&&!1!==l.queue&&g.queue(e,l.queue,(function(t,n){if(!0===n)return!0;x.velocityQueueEntryFlag=!0;var r=x.State.delayedElements.count++;x.State.delayedElements[r]=e;var a=function(e){return function(){x.State.delayedElements[e]=!1,t()}}(r);i(e).delayBegin=(new Date).getTime(),i(e).delay=parseFloat(l.delay),i(e).delayTimer={setTimeout:setTimeout(t,parseFloat(l.delay)),next:a}})),l.duration.toString().toLowerCase()){case"fast":l.duration=200;break;case"normal":l.duration=w;break;case"slow":l.duration=600;break;default:l.duration=parseFloat(l.duration)||1}if(!1!==x.mock&&(!0===x.mock?l.duration=l.delay=1:(l.duration*=parseFloat(x.mock)||1,l.delay*=parseFloat(x.mock)||1)),l.easing=u(l.easing,l.duration),l.begin&&!b.isFunction(l.begin)&&(l.begin=null),l.progress&&!b.isFunction(l.progress)&&(l.progress=null),l.complete&&!b.isFunction(l.complete)&&(l.complete=null),l.display!==r&&null!==l.display&&(l.display=l.display.toString().toLowerCase(),"auto"===l.display&&(l.display=x.CSS.Values.getDisplayType(e))),l.visibility!==r&&null!==l.visibility&&(l.visibility=l.visibility.toString().toLowerCase()),l.mobileHA=l.mobileHA&&x.State.isMobile&&!x.State.isGingerbread,!1===l.queue)if(l.delay){var p=x.State.delayedElements.count++;x.State.delayedElements[p]=e;var f=function(e){return function(){x.State.delayedElements[e]=!1,s()}}(p);i(e).delayBegin=(new Date).getTime(),i(e).delay=parseFloat(l.delay),i(e).delayTimer={setTimeout:setTimeout(s,parseFloat(l.delay)),next:f}}else s();else g.queue(e,l.queue,(function(e,t){if(!0===t)return T.promise&&T.resolver(y),!0;x.velocityQueueEntryFlag=!0,s()}));""!==l.queue&&"fx"!==l.queue||"inprogress"===g.queue(e)[0]||g.dequeue(e)}var c,f,m,h,y,V,S,E=arguments[0]&&(arguments[0].p||g.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||b.isString(arguments[0].properties));b.isWrapped(this)?(f=!1,h=0,y=this,m=this):(f=!0,h=1,y=E?arguments[0].elements||arguments[0].e:arguments[0]);var T={promise:null,resolver:null,rejecter:null};if(f&&x.Promise&&(T.promise=new x.Promise((function(e,t){T.resolver=e,T.rejecter=t}))),E?(V=arguments[0].properties||arguments[0].p,S=arguments[0].options||arguments[0].o):(V=arguments[h],S=arguments[h+1]),y=a(y)){var C,N=y.length,A=0;if(!/^(stop|finish|finishAll|pause|resume)$/i.test(V)&&!g.isPlainObject(S)){var I=h+1;S={};for(var L=I;L<arguments.length;L++)b.isArray(arguments[L])||!/^(fast|normal|slow)$/i.test(arguments[L])&&!/^\d/.test(arguments[L])?b.isString(arguments[L])||b.isArray(arguments[L])?S.easing=arguments[L]:b.isFunction(arguments[L])&&(S.complete=arguments[L]):S.duration=arguments[L]}switch(V){case"scroll":C="scroll";break;case"reverse":C="reverse";break;case"pause":var j=(new Date).getTime();return g.each(y,(function(e,t){s(t,j)})),g.each(x.State.calls,(function(e,t){var n=!1;t&&g.each(t[1],(function(e,a){var i=S===r?"":S;return!0!==i&&t[2].queue!==i&&(S!==r||!1!==t[2].queue)||(g.each(y,(function(e,r){if(r===a)return t[5]={resume:!1},n=!0,!1})),!n&&void 0)}))})),e();case"resume":return g.each(y,(function(e,t){o(t)})),g.each(x.State.calls,(function(e,t){var n=!1;t&&g.each(t[1],(function(e,a){var i=S===r?"":S;return!0!==i&&t[2].queue!==i&&(S!==r||!1!==t[2].queue)||!t[5]||(g.each(y,(function(e,r){if(r===a)return t[5].resume=!0,n=!0,!1})),!n&&void 0)}))})),e();case"finish":case"finishAll":case"stop":g.each(y,(function(e,t){i(t)&&i(t).delayTimer&&(clearTimeout(i(t).delayTimer.setTimeout),i(t).delayTimer.next&&i(t).delayTimer.next(),delete i(t).delayTimer),"finishAll"!==V||!0!==S&&!b.isString(S)||(g.each(g.queue(t,b.isString(S)?S:""),(function(e,t){b.isFunction(t)&&t()})),g.queue(t,b.isString(S)?S:"",[]))}));var O=[];return g.each(x.State.calls,(function(e,t){t&&g.each(t[1],(function(n,a){var s=S===r?"":S;if(!0!==s&&t[2].queue!==s&&(S!==r||!1!==t[2].queue))return!0;g.each(y,(function(n,r){if(r===a)if((!0===S||b.isString(S))&&(g.each(g.queue(r,b.isString(S)?S:""),(function(e,t){b.isFunction(t)&&t(null,!0)})),g.queue(r,b.isString(S)?S:"",[])),"stop"===V){var o=i(r);o&&o.tweensContainer&&(!0===s||""===s)&&g.each(o.tweensContainer,(function(e,t){t.endValue=t.currentValue})),O.push(e)}else"finish"!==V&&"finishAll"!==V||(t[2].duration=1)}))}))})),"stop"===V&&(g.each(O,(function(e,t){p(t,!0)})),T.promise&&T.resolver(y)),e();default:if(!g.isPlainObject(V)||b.isEmptyObject(V)){if(b.isString(V)&&x.Redirects[V]){var F=(c=g.extend({},S)).duration,q=c.delay||0;return!0===c.backwards&&(y=g.extend(!0,[],y).reverse()),g.each(y,(function(e,t){parseFloat(c.stagger)?c.delay=q+parseFloat(c.stagger)*e:b.isFunction(c.stagger)&&(c.delay=q+c.stagger.call(t,e,N)),c.drag&&(c.duration=parseFloat(F)||(/^(callout|transition)/.test(V)?1e3:w),c.duration=Math.max(c.duration*(c.backwards?1-e/N:(e+1)/N),.75*c.duration,200)),x.Redirects[V].call(t,t,c||{},e,N,y,T.promise?T:r)})),e()}var D="Velocity: First argument ("+V+") was not a property map, a known action, or a registered redirect. Aborting.";return T.promise?T.rejecter(new Error(D)):t.console&&console.log(D),e()}C="start"}var R={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},U=[];g.each(y,(function(e,t){b.isNode(t)&&l(t,e)})),(c=g.extend({},x.defaults,S)).loop=parseInt(c.loop,10);var H=2*c.loop-1;if(c.loop)for(var B=0;B<H;B++){var M={delay:c.delay,progress:c.progress};B===H-1&&(M.display=c.display,M.visibility=c.visibility,M.complete=c.complete),k(y,"reverse",M)}return e()}T.promise&&(V&&S&&!1===S.promiseRejectEmpty?T.resolver():T.rejecter())};(x=g.extend(k,x)).animate=k;var T=t.requestAnimationFrame||m;if(!x.State.isMobile&&n.hidden!==r){var C=function(){n.hidden?(T=function(e){return setTimeout((function(){e(!0)}),16)},d()):T=t.requestAnimationFrame||m};C(),n.addEventListener("visibilitychange",C)}return e.Velocity=x,e!==t&&(e.fn.velocity=k,e.fn.velocity.defaults=x.defaults),g.each(["Down","Up"],(function(e,t){x.Redirects["slide"+t]=function(e,n,a,i,s,o){var l=g.extend({},n),c=l.begin,u=l.complete,d={},p={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""};l.display===r&&(l.display="Down"===t?"inline"===x.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),l.begin=function(){for(var n in 0===a&&c&&c.call(s,s),p)if(p.hasOwnProperty(n)){d[n]=e.style[n];var r=P.getPropertyValue(e,n);p[n]="Down"===t?[r,0]:[0,r]}d.overflow=e.style.overflow,e.style.overflow="hidden"},l.complete=function(){for(var t in d)d.hasOwnProperty(t)&&(e.style[t]=d[t]);a===i-1&&(u&&u.call(s,s),o&&o.resolver(s))},x(e,p,l)}})),g.each(["In","Out"],(function(e,t){x.Redirects["fade"+t]=function(e,n,a,i,s,o){var l=g.extend({},n),c=l.complete,u={opacity:"In"===t?1:0};0!==a&&(l.begin=null),l.complete=a!==i-1?null:function(){c&&c.call(s,s),o&&o.resolver(s)},l.display===r&&(l.display="In"===t?"auto":"none"),x(this,u,l)}})),x}jQuery.fn.velocity=jQuery.fn.animate}(window.jQuery||window.Zepto||window,window,window?window.document:void 0)}));const VDom=function(){"use strict";function e(e,t,n){"prepend"==n||1==n?e.prepend(t):e.append(t)}function t(e,n){if(Object.prototype.hasOwnProperty.call(e,"x")&&!e.x||Object.prototype.hasOwnProperty.call(e,"condition")&&!e.condition)return;const r=(e,t)=>{let n;t?("string"==typeof t&&(t={target:t}),n=document.querySelector(t.target),1==t.prepend?n.prepend(e):n.append(e)):(console.log('function "castNode" missing second parameter (options)'),n=document.querySelector("body"),n.prepend(e))},a=(e,t)=>{s.setAttribute(e,String(t))},i=e=>{!e||e instanceof Element||(l&&(e.svg=!0),e=t(e)),e&&e instanceof Element&&s.appendChild(e)};if(e&&e instanceof Element)return void r(e,n);if(e&&"string"==typeof e)return void r(document.createTextNode(e),n);let s,o,l;if(l||e.svg?(o=e.t||e.tag||"svg",l=!0,s=document.createElementNS("http://www.w3.org/2000/svg",o)):(o=e.t||e.tag||"div",s=document.createElement(o)),"svg"==o&&(a("xmlns","http://www.w3.org/2000/svg"),a("version","1.1")),Object.keys(e).forEach(t=>{const n=e[t];if(n)if(["c","class","classes"].includes(t))a("class",n);else if(["h","html"].includes(t))if(["string","number"].includes(typeof n))s.appendChild(document.createTextNode(n));else if(Array.isArray(n))for(let e=0;e<n.length;e++)i(n[e]);else i(n);else if(["k","click"].includes(t))s.addEventListener("click",n);else if(["e","event","events"].includes(t))for(const e in n)n[e]&&s.addEventListener(e,n[e]);else if(["y","style","styles"].includes(t))Object.assign(s.style,n);else if(["s","setStyle","setStyles","setClass","setClasses"].includes(t))d(n);else if(["a","attribute","attributes"].includes(t))for(const e in n)n[e]&&a(e,n[e]);else["i","id"].includes(t)?a("id",n):["f","href"].includes(t)?a("href",n):["r","src"].includes(t)?a("src",n):["v","value"].includes(t)?a("value",n):["for"].includes(t)?a("for",n):["innerHtml"].includes(t)&&(s.innerHTML=n)}),!n)return s;r(s,n)}function n(e,t){if(Object.prototype.hasOwnProperty.call(e,"x")&&!e.x)return;const r=(e,t)=>{let n;t?("string"==typeof t&&(t={target:t}),n=document.querySelector(t.target),1==t.prepend?n.prepend(e):n.append(e)):(console.log('function "cN" missing second parameter (options)'),n=document.querySelector("body"),n.prepend(e))},a=(e,t)=>{s.setAttribute(e,String(t))},i=e=>{!e||e instanceof Element||(l&&(e.svg=!0),e=n(e)),e&&e instanceof Element&&s.appendChild(e)};if(e&&e instanceof Element)return void r(e,t);if(e&&"string"==typeof e)return void r(document.createTextNode(e),t);let s,o,l;if(l||e.svg?(o=e.t||"svg",l=!0,s=document.createElementNS("http://www.w3.org/2000/svg",o)):(o=e.t||"div",s=document.createElement(o)),"svg"==o&&(a("xmlns","http://www.w3.org/2000/svg"),a("version","1.1")),Object.keys(e).forEach(t=>{const n=e[t];if(n)switch(t){case"c":a("class",n);break;case"h":if(["string","number"].includes(typeof n))s.appendChild(document.createTextNode(n));else if(Array.isArray(n))for(let e=0;e<n.length;e++)i(n[e]);else i(n);break;case"k":s.addEventListener("click",n);break;case"e":for(const e in n)n[e]&&s.addEventListener(e,n[e]);break;case"y":Object.assign(s.style,n);break;case"s":d(n);break;case"a":for(const e in n)n[e]&&a(e,n[e]);break;case"i":a("id",n);break;case"f":a("href",n);break;case"r":a("src",n);break;case"v":a("value",n);break;case"for":a("for",n);break;case"innerHtml":s.innerHTML=n}}),!t)return s;r(s,t)}function r(n,r,a){if(!r||"clear"!=r&&1!=r.clear)if(["string","number"].includes(typeof r)){const e="string"!=typeof n?n:document.querySelector(n);e&&(e.textContent=String(r))}else{if(!r){if(n.t||n.tag)return t(n);throw new Error("Can not set node")}{let s=n;"string"==typeof n&&(s=i(n)),Array.isArray(r)?r.forEach(n=>{n instanceof Element?e(s,n,a):e(s,t(n),a)}):"object"==typeof r&&(r instanceof Element?e(s,r,a):e(s,t(r),a))}}else{const e="string"!=typeof n?n:document.querySelector(n);e&&e.parentNode.removeChild(e)}}function a(e,t){return r(e,t)}function i(e){const t=document.querySelector(e);if(t)return Object.assign(t,{getNode:i}),t}function s(e){return i(e)}function o(e){const t=document.querySelectorAll(e);if(t)return t}function l(e){return i(e)}function c(e,t,n){let r=e;"string"==typeof e&&(r=i(e));return null==n&&(n={}),null!=n.delay&&(n.delay=250*n.delay),null!=n.duration&&(n.duration=250*n.duration),Velocity(r,t,n)}function u(e,t,n){return c(e,t,n)}function d(e,t){"object"==typeof e&&(t=e,e="component-styles"),document.getElementById(e)||r("head",{t:"style",i:e});const n=document.getElementById(e);"string"==typeof t?n.textContent.includes(t)||(n.textContent+=t):"object"==typeof t&&(n.textContent+=function(e,t){let n="";for(const r in e){const a=(e=>e.includes("@font-face")?"@font-face{":"."+e+"{")(r);if(!t.textContent.includes(a)){n+=a;for(const t in e[r])n+=t+":"+e[r][t]+";";n+="}"}}return n}(t,n))}function p(e){const t=getComputedStyle(document.documentElement).getPropertyValue(e).replace("px","").replace("rem","");return isNaN(t)?t.trim():Number(t)}function g(e){const t="string"==typeof e?i(e):e;return t?!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length):void 0}function f(e){return Number(e)*parseFloat(getComputedStyle(document.documentElement).fontSize)}function m(e,t){return new Promise((function(n,r){const a=document.createElement("script");a.src=e,a.onload=n,a.onerror=r,t&&(a.id=t),document.head.appendChild(a)}))}function h(e){return new Promise((function(t,n){const r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,r.onload=t,r.onerror=n,document.head.appendChild(r)}))}function y(e){const t="string"==typeof e?i(e):e;g(t)?t.style.display="none":t.style.display="block"}return V.castNode=t,V.cN=n,V.setNode=r,V.sN=a,V.getNode=i,V.gN=s,V.getNodes=o,V.gNs=l,V.setAnimation=c,V.sA=u,V.setStyle=d,V.getCss=p,V.getVisibility=g,V.castRemToPixel=f,V.setScript=m,V.setStylesheet=h,V.setToggle=y,{castNode:t,cN:n,setNode:r,sN:a,getNode:i,gN:s,getNodes:o,gNs:l,setAnimation:c,sA:u,setStyle:d,getCss:p,getVisibility:g,castRemToPixel:f,setScript:m,setStylesheet:h,setToggle:y}}(),VRoute=function(){"use strict";window.onpopstate=()=>{V.setState("active",window.history.state),Canvas.draw(window.history.state)};const e=new UniversalRouter([{path:"",action:()=>({status:"home",data:["/network/all"]})},{path:"/profile",children:[{path:"/:rawentity",action:e=>({status:"profile",data:[e.params.rawentity]})}]},{path:"/chat",children:[{path:"/everyone",action:()=>({status:"chat everyone",data:["/chat/everyone"]})},{path:"/:id",action:e=>({status:"chat id",data:[e.params.id]})}]},{path:"/network",children:[{path:"",action:()=>({status:"market",data:["/network"]})},{path:"/hall",action:()=>({status:"hall",data:["/network/hall"]})},{path:"/:id",action:e=>({status:"market category",data:["/network/"+e.params.id]})}]},{path:"/me",children:[{path:"/transfers",action:()=>({status:"user account",data:["/me/transfers"]})},{path:"/profile",action:()=>({status:"user profile",data:["/me/profile"]})},{path:"/settings",action:()=>({status:"user settings",data:["/me/settings"]})},{path:"/entities",action:()=>({status:"user entities",data:["/me/edit"]})}]},{path:"/media",children:[{path:"",action:()=>({status:"media",data:["/media"]})},{path:"/:id",action:e=>({status:"media category",data:["/media/"+e.params.id]})}]},{path:"/farms",children:[{path:"",action:()=>({status:"farms",data:["/farms"]})},{path:"/:id",action:e=>({status:"farms category",data:["/farms/"+e.params.id]})}]},{path:"/data",action:()=>({status:"data",data:["/data"]})},{path:"/pools",action:()=>({status:"pool",data:["/pools"]})}]);function t(t){return e.resolve(t)}function n(){}function r(e){const t={path:e};V.getState("active").path!=t.path&&(window.history.pushState(t,t.path,window.location.origin+t.path),V.setState("active",{path:t.path}))}return V.castRoute=t,V.setRoute=n,V.setBrowserHistory=r,{castRoute:t,setRoute:n,setBrowserHistory:r}}(),VAuth=function(){"use strict";const e={namespaceEndpoint:V.getSetting("namespaceEndpoint")};function t(e,t){return n("mutation SetEntityAuth {\n            setAuth { success message uuidE uuidP exp jwt tempRefresh }\n          }",void 0,e,t,V.getLocal("last-connected-address")?V.getLocal("last-connected-address").replace(/"/g,""):void 0,function(){const e=V.getLocal("temp-refresh");return e?e.replace(/"/g,""):void 0}())}function n(t,n,r,a,i,s){return fetch(e.namespaceEndpoint,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:r?"uPhrase "+r:"","Creator-UPhrase":a||"not set","Last-Connected-Address":i||"not set","Temp-Refresh":s||"not set","Browser-ID":V.getLocal("browser-id").replace(/"/g,"")},body:JSON.stringify({query:t,variables:n}),credentials:"include"}).then(e=>e.json())}function r(e){V.setLocal("temp-refresh",e||"clear")}function a(){console.log(777,"setDisconnect");return n("mutation SetDisconnect {\n            setDisconnect { success }\n          }").then(()=>{r(),V.setLocal("last-connected-address","clear"),V.setLocal("welcome-modal",1),window.location.href="/"})}async function i(e,n){console.log(888,"setAuth");return await t(e,n).then(e=>e.errors?(r(),V.successFalse("set auth",e.errors[0].message)):(r(e.data.setAuth.jwt),V.setJwt(e.data.setAuth.jwt),V.successTrue("set auth",e.data.setAuth)))}return V.setAuth=i,V.setDisconnect=a,V.setTempRefreshToken=r,{setAuth:i,setDisconnect:a,setTempRefreshToken:r}}(),VEntity=function(){"use strict";const e="/e1/v0",t="/p1/v0",n="/a1/v0",r=730,a=!0,i=7,s=3,o=16,l=/[.,;/!?:@=&"<>#%(){}[\]|\\^~`]/g,c=/[^0-9^a-z^A-Z^\s^'-–]/g,u=(()=>{const e={invalidTitle:"Invalid title",invalidChar:"Title: invalid character",maxLength:"Title: max 16 characters in a word",min2Adjecent:"Title: min 2 adjacent letters",maxHuman:"Title: max 3 words",maxEntity:"Title: max 7 words",noNumbers:"Title: Your personal name can not include a number",free:"free",targetRange:"Target must be within 0 - 9999",isNaN:"Target must be a number",noUnit:'Please add a unit, such as "hour"',noWhitespace:"Whitespace not allowed in unit",noTarget:"Please add a target"};return V.getSetting("devMode")&&VTranslation.setStringsToTranslate(e),e})();async function d(a){if(a.location&&!a.lat)return{success:!1,endpoint:"entity",status:"no geo data",message:"geoData is incomplete - select from suggestions"};const i=p(a.title.toLowerCase(),a.role);if(!i.success)return i;const s=f(a.target,a.unit,a.role);if(!s.success)return s;const o=g(),l=V.castUuid().base64Url.substr(3,V.getSetting("uuidStringLength")),c=V.castUuid().base64Url.substr(3,V.getSetting("uuidStringLength")),u=V.castUuid().base64Url.substr(3,V.getSetting("uuidStringLength")),d=V.castUnix();let m,h,y,v,b,w,S,x,E={};if(a.location&&a.lat?E={coordinates:[Number(a.lng),Number(a.lat)],baseLocation:a.location||void 0,type:"Point",rand:!1}:a.location&&!a.lat&&(E={baseLocation:a.location||void 0}),a.uPhrase)m=a.uPhrase;else{m="vx"+V.castUuid().base64Url.slice(0,15)+"X"}const P=V.getState("activeEntity");P&&(h=P.uuidE);const k=P&&P.properties&&P.properties.email||void 0;if(V.getState("tinyImageUpload")&&(w=V.getState("tinyImageUpload")),V.getState("thumbnailUpload")&&(S=V.getState("thumbnailUpload")),V.getState("mediumImageUpload")&&(x=V.getState("mediumImageUpload")),V.setState("tinyImageUpload","clear"),V.setState("thumbnailUpload","clear"),V.setState("mediumImageUpload","clear"),"EVM"==V.getSetting("transactionLedger")){if("Person"==a.role&&V.cA())a.evmAddress=V.cA(),a.evmIssuer="SELF";else{const e=window.Web3Obj.eth.accounts.create();a.evmAddress=e.address.toLowerCase(),a.evmPrivateKey=e.privateKey.toLowerCase(),a.evmIssuer="IDXNS"}Object.keys(V.getState("rolesWithReceivingAddress")).includes(a.role)&&Object.assign(a,{evmReceivingAddress:V.aE().evmCredentials.address}),await V.getContractState().then(e=>{e.success?(y=e.data[0].currentBlock,v=e.data[0].network.rpc,b=e.data[0].contract):(y=-1,v="error",b="error")})}else if("Symbol"==V.getSetting("transactionLedger")){const e=await V.setConnectedAddress();!a.symbolCredentials&&(a.symbolCredentials=e.data[0])}return{success:!0,endpoint:"entity",status:"cast entity",data:[{contextE:e,typeE:a.role,uuidE:l,contextP:t,uuidP:c,contextA:n,uuidA:u,active:!0,statusCode:100,title:i.data[0],tag:o,creatorUuid:h,heldBy:void 0,uPhrase:m,issuer:window.location.host,unix:d,expires:d+86400*r,evmCredentials:{address:a.evmAddress,privateKey:a.evmPrivateKey,evmIssuer:a.evmIssuer},symbolCredentials:a.symbolCredentials||{address:void 0},receivingAddresses:{evm:a.evmReceivingAddress},props:{descr:a.description||void 0,target:Number(a.target),unit:a.unit||void 0,email:k,emailPrivate:a.emailPrivate||void 0},geometry:E,imageName:S?S.originalName:void 0,tinyImageDU:w?w.dataUrl:void 0,thumbnailDU:S?S.dataUrl:void 0,mediumImageDU:x?x.dataUrl:void 0,continent:a.continent,avatar:a.avatar,privacy:a.privacy,tinyImage:w,thumbnail:S,mediumImage:x,block:y,rpc:v,contract:b}]}}function p(e,t){const n=(e=e.trim().toLowerCase()).replace(/[-–]/g," ").split(" "),r=n.length,d=n.map(e=>e.length>o);let p;if(["vx","Vx","0x"].includes(e.substring(0,2))&&(p=V.getString(u.invalidTitle+' "vx"')),-1!=e.indexOf("2121")&&(p=V.getString(u.invalidTitle+' "2121"')),a&&e.match(c)&&(p=V.getString(u.invalidTitle)),e.match(l)&&(p=V.getString(u.invalidChar)+' "'+e.match(l)[0]+'"'),!e.match(/[a-z]{2}|[A-Z]{2}/g)&&(p=V.getString(u.min2Adjecent)),["Person","PersonMapped"].includes(t)&&r>s&&(p=V.getString(u.maxHuman)),["Person","PersonMapped"].includes(t)&&e.match(/[0-9]/g)&&(p=V.getString(u.noNumbers)),-1==["Person","PersonMapped"].indexOf(t)&&r>i&&(p=V.getString(u.maxEntity)),d.includes(!0)&&(p=V.getString(u.maxLength)),p)return{success:!1,endpoint:"entity",status:"invalid title",message:p};{let t=n.map((function(e){return e.length>2&&"mc"==e.substr(0,2)?e.charAt(0).toUpperCase()+e.slice(1,2)+e.charAt(2).toUpperCase()+e.slice(3):e.length>3&&"mac"==e.substr(0,3)?e.charAt(0).toUpperCase()+e.slice(1,3)+e.charAt(3).toUpperCase()+e.slice(4):e.charAt(0).toUpperCase()+e.slice(1)})).join(" ");if(-1!=e.indexOf("-")||-1!=e.indexOf("–")){const n=e.indexOf("-")+e.indexOf("–")+1,r=t.split("");r[n]="-",t=r.join("")}return{success:!0,endpoint:"entity",status:"cast entity title",data:[t]}}}function g(){let e=!0;for(;e;){const t=String(V.castRandomInt(2,9)),n=String(V.castRandomInt(1,9)),r=String(V.castRandomInt(2,9));if(n!=t&&r!=t&&r!=n&&-1==[t,n,r].indexOf("6")&&-1==[t,n,r].indexOf("7")&&-1==[t,n,r].indexOf("4")&&t+n!="69"&&r+n!="69"&&t+n!="13"&&r+n!="13"&&t+n!="21"&&r+n!="21"){e=!1;return"#"+t+n+r+n}}}function f(e,t,n){let r,a=t;return""==e&&(e=void 0),e&&(a=a.trimStart(),a=a.trimEnd(),a.startsWith("per ")&&(a=a.replace("per ",""),a=a.trimStart()),""==a?r=V.getString(u.noUnit):a.includes(" ")&&(r=V.getString(u.noWhitespace)),isNaN(e)&&(r=V.getString(u.isNaN))),["Pool"].includes(n)&&(""==a&&(r=void 0),!e&&(r=V.getString(u.noTarget))),(Number(e)>9999||Number(e)<0)&&(r=V.getString(u.targetRange)),r?{success:!1,endpoint:"entity",status:"invalid target",message:r}:{success:!0,endpoint:"entity",status:"cast entity target",data:{target:e,unit:a}}}async function m(e=V.aE()){const t=V.getSetting("transactionLedger"),n=(e,t)=>({success:!1,endpoint:"entity",ledger:e,status:"could not retrieve entity balance",message:t,data:[]});if(["EVM","Symbol"].includes(t)&&V.aE()){const r=e[t.toLowerCase()+"Credentials"]?await V.getAddressState(e[t.toLowerCase()+"Credentials"].address):{success:!1};return r.success?{success:!0,endpoint:"entity",ledger:t,status:"entity balance retrieved",data:[r.data[0]]}:n(t,r)}if("MongoDB"==t&&V.aE()){const r=await h(e.fullId);return r.success?{success:!0,endpoint:"entity",ledger:t,status:"entity balance retrieved",data:[{tokenBalance:r.data[0].onChain.balance,liveBalance:r.data[0].onChain.balance,lastBlock:r.data[0].onChain.lastMove}]}:n(t,r)}return n(t,"no cA and no aE")}function h(e="all",t="role"){const n=V.getSetting("entityLedger");if(["MongoDB","Firebase"].includes(n))"object"==typeof e||Array.isArray(e)?t="uuidE":new RegExp(/\s#\d{4}/).test(e)?t="fullId":V.checkForEmphasisTrigger(e)||"point"==e?t=e:e.length==V.getSetting("uuidStringLength")?t="uuidE":"0x"==e.substr(0,2)&&42==e.length||"JOIN"==e.substr(0,4)&&48==e.length?t="evmAddress":"T"==e.substr(0,1)&&40==e.length&&(t="symbolAddress");else if("3Box"==n&&"0x"!=e.substr(0,2))return Promise.resolve({success:!1,endpoint:"entity",status:"return false for testing"});return V.getData(e,"entity by "+t,n)}async function y(e,t){if("object"==typeof e){let t=await d(e);for(;"entity exists"==t.status;)console.log("entity exists (while loop):",t.data[0].fullId),t=await d(e);return t.success?V.setData(t.data[0],"entity",V.getSetting("entityLedger")):Promise.resolve(t)}return"verification"==t?V.setData(e,"verification",V.getSetting("transactionLedger")):V.checkForEmphasisTrigger(t)?V.setData(e,t,V.getSetting("entityLedger")):(Object.assign(t,{entity:e}),V.setData(t,"entity update",V.getSetting("entityLedger")).then(e=>(console.log("RESPONSE:",e),e.success&&(V.setCache("viewed","clear"),"Firebase"==V.getSetting("entityLedger")&&[V.aE().uuidE,V.aE().uuidP].includes(e.data[0].a)?h(V.aE().uuidE).then(e=>{e.success&&V.setActiveEntity(e.data[0])}):"MongoDB"==V.getSetting("entityLedger")&&V.aE().fullId==e.data[0].fullId&&V.setActiveEntity(e.data[0])),e)))}function v(e){return V.getData(e,"entity by query",V.getSetting("entityLedger"))}return V.castEntityTitle=p,V.castTag=g,V.castTarget=f,V.getEntity=h,V.setEntity=y,V.getEntityBalance=m,V.getQuery=v,{castEntityTitle:p,castTag:g,castTarget:f,getEntity:h,setEntity:y,getEntityBalance:m,getQuery:v}}(),VMessage=function(){"use strict";const e=["porn","sex","xxx","bit.ly","goo.gl","tinyurl","ow.ly","is.gd","buff.ly","adf.ly","bit.do","mcaf.ee","su.pr"],t={forbiddenFirstNamesEN:["to","and"],forbiddenFirstNamesDE:["an","und"],commandsHelp:["help","hilfe","도움"],commandsSearch:["search","suche","find","finde","fx","view"],commands:["nukeme","crashapp","verify","disable","enable","analyse","a!","payouttokennow"],emphasis:["vip","v!","revokevip","feature","f!","highlight","revokehighlight","h!","rh!"],commandsEN:["+","-","pay","send","request","transfer","sx","s!","rx","r!","tx","t!"],commandsDE:["zahle","sende","empfange","leite","zahlen","senden","empfangen","leiten"],commandsKO:["더하기","지불하다","전송","요청"],misspellingsEN:["sent","sned","sedn","semd","sen ","snd ","sed "],misspellingsDE:["TODO"]};function n(e){const n=t.commands.concat(t.emphasis,t.commandsHelp,t.commandsSearch,t.commandsEN,t.commandsDE,t.commandsKO),r=e.trim().split(" ");return"+"!==r[0].charAt(0)&&"-"!==r[0].charAt(0)||(r.splice(1,0,r[0].slice(1)),r.splice(0,1,r[0].charAt(0))),-1!=n.indexOf(r[0].toLowerCase())&&(r[0]=r[0].toLowerCase(),r)}function r(e){return t.emphasis.includes(e)}async function a(r){const a=r.trim().replace(/(?:\r\n|\r|\n)/g," ").replace(/<[^>]+>/g,"");const i=e.some(e=>a.toLowerCase().includes(e));if(a.indexOf("vx")>-1)return Promise.resolve({success:!1,endpoint:"message",status:"unique phrase entered?"});if(i)return Promise.resolve({success:!1,endpoint:"message",status:"sorry, message content may contain spam"});if(null===a.match(/[a-zA-Z0-9+]/))return Promise.resolve({success:!1,endpoint:"message",status:"invalid message"});if(t.misspellingsEN.concat(t.misspellingsDE).indexOf(a.substr(0,4))>=0)return Promise.resolve({success:!1,endpoint:"message",status:"misspelled trigger"});{const e=n(a);if(!e){const e={act:"New chat message",msg:r};return V.setTelegramNotification(e),V.setEmailNotification(e),V.setMessage(a)}{const n=V.getState("active").autofillUuidE||V.getState("active").lastViewedUuidE;if(-1!=t.commandsHelp.indexOf(e[0]));else{if(-1==t.commandsSearch.indexOf(e[0]))return["highlight","h!"].includes(e[0])?V.setEntity(n,"highlight").then(e=>e):["feature","f!"].includes(e[0])?V.setEntity(n,"feature").then(e=>e):["vip","v!"].includes(e[0])?V.setEntity(n,"vip").then(e=>e):"verify"===e[0]?(e.shift(),V.setEntity(e.join(" "),{field:"status.verified",data:!0}).then(e=>(console.log("verification success:",e.data[0].fullId),{success:!0,status:"entity verified"}))):V.setTransactionConfirmation(e);findAndDisplayEntity(r)}}}}function i(e="all"){return V.getData(e,"message",V.getSetting("chatLedger"))}function s(e){const t={};return t.message=e,V.aE()?(t.sender=V.aE().fullId,t.uuidE=V.aE().uuidE,t.time=Date.now(),V.setData(t,"message",V.getSetting("chatLedger"))):Promise.resolve({success:!1,endpoint:"message",status:"not joined"})}return V.checkForTriggers=n,V.checkForEmphasisTrigger=r,V.getMessage=i,V.setMessage=s,V.setMessageBot=a,{checkForTriggers:n,checkForEmphasisTrigger:r,getMessage:i,setMessage:s,setMessageBot:a}}(),VNotification=function(){"use strict";const e={emailEndpoint:V.getSetting("emailEndpoint"),telegramEndpoint:V.getSetting("telegramEndpoint")};function t(e){return Object.assign(e,{action:e.action||e.act,network:window.location.hostname||"Testnet",recipient:e.recipient||V.getSetting("networkAdminEmail")||V.getSensitiveData("viAdmin")+"@gmail.com"})}function n(n){return V.setData(t(n),e.emailEndpoint,"api")}function r(n){return V.setData(t(n),e.telegramEndpoint,"api")}return V.setEmailNotification=n,V.setTelegramNotification=r,{setEmailNotification:n,setTelegramNotification:r}}(),VTransaction=function(){"use strict";const e=(()=>{const e={notActive:"no active entity",invalidAmount:"invalid amount",invalidRecipient:"invalid recipient",noDecimals:"no decimals",noRecipient:"recipient name and tag not found",noRecipientAddress:"recipient address not found"};return V.getSetting("devMode")&&VTranslation.setStringsToTranslate(e),e})();async function t(t){const r=V.getState("activeEntity");if(!r)return{success:!1,endpoint:"transaction",status:V.getString(e.notActive)};const a=t.slice(),i=Date.now(),s=Number(Math.floor(i/1e3)),o=a.indexOf(V.getString("for")),l=a.indexOf(V.getString("to"));let c,u="",d="",p=0,g=0,f=0,m=0;const h=a[0];if(-1!=o&&(u=a.splice(o,a.length),u.shift(),u=u.join(" ").trim()),-1==l||isNaN(a[l-1])){a.shift();for(let e=a.length-1;e>=0;e--){if("#"===a[e].charAt(0)){d=n(a);break}isNaN(Number(a[e]))||(p+=Number(a[e]),a.pop())}}else{const e=a.splice(0,l+1);p=e.filter((function(e){return Number(parseInt(e)==e)})).reduce((function(e,t){return Number(e)+Number(t)}),0),d=n(a)}if(!p)return{success:!1,endpoint:"transaction",status:V.getString(e.invalidAmount)};if(p%1!=0)return{success:!1,endpoint:"transaction",status:V.getString(e.noDecimals)};if(!d)return{success:!1,endpoint:"transaction",status:V.getString(e.invalidRecipient),error:"invalid recipient"};const y=await V.getEntity(d);if(!y.success)return{success:!1,endpoint:"transaction",status:V.getString(e.noRecipient)};c="V";{const e=V.getGrossVAmount(p);f=e.contribution,g=e.feeAmount,m=e.gross}let v,b;const w=V.getSetting("transactionLedger");if("EVM"==w){const e=y.data[0];e.evmCredentials&&e.evmCredentials.address&&(v=e.evmCredentials.address),e.receivingAddresses&&e.receivingAddresses.evm&&(v=e.receivingAddresses.evm)}else"Symbol"==w&&V.cA()&&(v=y.data[0].symbolCredentials.address,b=r.symbolCredentials.privateKey);return V.cA()&&!v?{success:!1,endpoint:"transaction",status:V.getString(e.noRecipientAddress)}:{success:!0,endpoint:"transaction",status:"transaction cast",data:[{date:(new Date).toString(),amount:p,feeAmount:g,contribution:f,txTotal:m,currency:"V",command:h,initiator:r.fullId,initiatorAddress:V.cA()||V.aE().evmCredentials.address,sender:r.fullId,senderAddress:V.cA()||V.aE().evmCredentials.address,recipient:d,recipientAddress:v,reference:u||"no reference given",timeSecondsUNIX:s,origMessage:t,signature:b,fromEntity:r.fullId,toEntity:d,title:d,txType:"out"}]}}function n(e){const t=e.pop();return V.castEntityTitle(e.join(" ")).data[0]+" "+t}async function r(e,t){let n;if(e.blockNumber){const t=await V.castTransfers([e],V.cA()||V.aE().evmCredentials.address);n=AccountComponents.accountCard(t[0])}else n=AccountComponents.accountCard(e);const r=CanvasComponents.card(n),a=V.getNode("#"+t);a&&V.setNode(a,"clear"),V.setNode("modal","clear"),V.setNode("list",r,"prepend")}async function a(e){return V.getData(e,"transaction",V.getSetting("transactionLedger"))}async function i(e){Modal.draw("preview");const n=await t(e);return n.success||V.setNode(".modal","clear"),Promise.resolve(n)}function s(e){return e.success?V.setData(e.data[0],"transaction",V.getSetting("transactionLedger")):Promise.resolve(e)}async function o(e){if(e.success)return e.field="transaction.log",e.activeProfile=V.aE().uuidP,V.setData(e,"entity update",V.getSetting("entityLedger"))}async function l(e=V.aE().uuidP){return V.getData(e,"transaction log",V.getSetting("entityLedger"))}function c(e){if(Modal.draw("transaction sent"),"/me/transfers"==V.getState("active").navItem){const t=AccountComponents.accountPlaceholderCard(),n=CanvasComponents.card(t,void 0,"phS"+e.substr(3,6)+"E");V.setNode("list",n,"prepend")}}function u(e){if(!V.getSetting("subscribeToChainEvents")&&"/me/transfers"==V.getState("active").navItem)if(e.events)r(e.events.TransferSummary,"phS"+e.transactionHash.substr(3,6)+"E");else{const e=V.getState("active").transaction.data[0];r(e,"phS"+String(e.timeSecondsUNIX).substr(3,6)+"E")}}return V.getTransactions=a,V.setTransactionConfirmation=i,V.setTransaction=s,V.setTransactionLog=o,V.getTransactionLog=l,V.drawHashConfirmation=c,V.drawTxConfirmation=u,{getTransactions:a,setTransactionConfirmation:i,setTransaction:s,setTransactionLog:o,getTransactionLog:l,drawHashConfirmation:c,drawTxConfirmation:u}}(),VDebugger=function(){"use strict";const e=[];VConfig.getSetting("sendLogsToServer")&&Object.assign(window.console,{log:n,error:n});const t=Date.now();function n(t,n){e.push(" "+t+("string"==typeof n?n:n?JSON.stringify(n):""))}console.log("*** NEW SESSION ***"),console.log("*** ",window.location.href),console.log("*** ",(new Date).toString()),console.log("*** ",navigator.userAgentData),console.log("*** App version ",VConfig.getSetting("appVersion")),console.log("*** Upload version ",VConfig.getSetting("uploadVersion")),console.log("*** NEW SESSION END ***"),setInterval(e=>{e.length&&function(e){fetch(V.getSetting("socketHost")+"/logs",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t+" - "+String(new Date).substr(16,8)+" // "+e)}),e.length=0}(e)},9e3,e);const r=V.cN({t:"debug",c:"debug",s:{debug:{position:"fixed",top:"174px",left:"28px","font-size":"0.9rem",cursor:"pointer",background:"bisque","max-width":"340px","word-wrap":"anywhere",padding:"10px","list-style":"none","max-height":"410px","overflow-y":"scroll"}},h:{tag:"ul"},k:function(){V.setNode("debug","clear")}});function a(e,t,n,a,s,o){const l=[e,t,n,a,s,o];console.log("*** debug ***"),r.appendChild(V.setNode({tag:"li",html:"*** debug ***"})),l.forEach(e=>{null!=e&&(console.log(e),r.appendChild(V.setNode({tag:"li",html:JSON.stringify(e)})))}),setTimeout(i,3e3)}function i(){V.setNode("body",r)}function s(){localStorage.clear(),location=window.location.origin}function o(){V.setToggle("debug")}function l(){const e=JSON.stringify(VTranslation.getStringsToTranslate(),null,2),t=new Blob([e],{type:"application/json"}),n=document.createElement("a");n.download="strings.json",n.href=window.URL.createObjectURL(t),n.click()}return V.debug=a,{debug:a,debugLogs:function(){return V.cN({c:"debog-log__btn cursor-pointer",s:{"debog-log__btn":{position:"fixed",top:"174px",left:"0px",background:"green",color:"white",padding:"4px 6px"}},k:o,h:"L"})},downloadStrings:function(){return V.cN({c:"download-strings__btn cursor-pointer",s:{"download-strings__btn":{position:"fixed",top:"200px",left:"0px",background:"orange",color:"white",padding:"4px 5px"}},k:l,h:"T"})},resetApp:function(){return V.cN({c:"reset-app__btn cursor-pointer",s:{"reset-app__btn":{position:"fixed",top:"226px",left:"0px",background:"blue",color:"white",padding:"4px 5px"}},k:s,h:"R"})}}}(),VDescription=function(){"use strict";const e=2e3,t=200,n=12,r=3,a="youtu|vimeo",i="facebook|twitter|linkedin|t.me|medium|instagram|tiktok";let s,o,l,c,u,d,p,g,f,m,h;function y(e,t){if(!["http","www."].includes(e.toLowerCase().substr(0,4))){const t=w(e);return void(t&&f.appendChild(t))}if(c+=1,c>n)return void f.appendChild(w("*link omitted (max links)*"));const s="www."==e.toLowerCase().substr(0,4)?"https://"+e:e;let o=s.split("/")[2];o=o.replace("www.","");const l=s.split("/").pop();if(t)f.appendChild(S(s,o));else if(l.match(/-\d{4}$/))f.appendChild(S(s,V.castSlugOrId(l)));else if(o==window.location.host)f.appendChild(S(s,l));else if(o.match(new RegExp(i)))m||(m=V.cN({t:"ul",c:"social-links flex overflow-x-scroll list-none pt-rr pb-rr"})),m.appendChild(function(e,t){return V.cN({t:"li",c:"mr-s",h:{t:"a",f:e,h:V.getIcon(t.match(new RegExp(i))[0])}})}(s,o));else if(o.match(new RegExp(a))){u+=1;const e=o.includes("youtu")?x(s):E(s);e&&u<=r?b(e,s,o):f.appendChild(S(s,o))}else if(o.match(/soundcloud/)){const e=s.split("/").pop();if(isNaN(e)||d>=1)f.appendChild(S(s,o));else{b(function(e){return V.cN({c:"iframe-wrapper w-full",h:{t:"iframe",r:`https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/${e}&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true`,a:{width:"100%",height:"166",scrolling:"no",frameborder:"no",allow:"autoplay"}}})}(e),s,o),d+=1}}else if(o.match(/anchor/)&&d<1){b((g=s.replace("/episodes","/embed/episodes"),V.cN({h:{t:"iframe",r:g,a:{width:"100%",height:"102px",scrolling:"no",frameborder:"0"}}})),s,o),d+=1}else if(o.match(/podcasts.apple/)&&d<1){b((p=s.replace("podcasts.apple","embed.podcasts.apple"),V.cN({h:{t:"iframe",r:p,a:{allow:"autoplay *; encrypted-media *; fullscreen *",frameborder:"0",height:"175",style:"width:100%;max-width:660px;overflow:hidden;background:transparent;",sandbox:"allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation"}}})),s,o),d+=1}else f.appendChild(S(s,o));var p,g}function v(e){if(e)if(e.includes("\n\n")){const t=e.split("\n\n");for(let e=0;e<t.length;e++)s.push(t[e]),e!=t.length-1&&s.push("pEnd")}else s.push(e)}function b(e,t,n){o?f.appendChild(e):(o=!0,h=e,t&&f.appendChild(S(t,n)))}function w(e){return!e.match(/^\s{2,}$/)&&V.cN({t:"span",h:e})}function S(e,t){return V.cN({t:"a",f:e,h:t})}function x(e){const t=e.split("/").pop();return V.cN({c:"iframe-wrapper w-full",h:{t:"iframe",r:"https://www.youtube.com/embed/"+t,a:{frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture; fullscreen;",allowfullscreen:"allowfullscreen"}}})}function E(e){const t=e.split("/").pop();return isNaN(t)?null:V.cN({c:"iframe-wrapper w-full",h:{t:"iframe",r:"https://player.vimeo.com/video/"+t+"?color=ffffff&title=0&byline=0&portrait=0",a:{frameborder:"0",allow:"autoplay; fullscreen",allowfullscreen:"allowfullscreen"}}})}function P(n){return s=[],o=!1,l=0,c=0,u=0,d=0,p=V.cN({c:"intro"}),g=V.cN({c:"description"}),f=V.cN({t:"p",c:"paragraph pb-r"}),m=void 0,h=void 0,function(e){const t=(" "+e).slice(1),n=t.match(/(?:www|https?)[^\s!,]+/gi);if(!n)return v(t),void s.push("pEnd");let r;for(let e=0;e<n.length;e++){if("."==n[e].substr(-1)&&(n[e]=n[e].slice(0,-1).replace("..","")),0==e)r=t.split(n[e]);else{const t=r.pop();r=t.split(n[e])}v(r[0]),s.push(n[e])}v(r[1]),s.push("pEnd")}(n),function(t){for(let n=0;n<t.length;n++)if(!(""==t[n]||t[n]>e))if("pEnd"==t[n]||l>e){if(l>e&&f.appendChild(w("*text shortened*")),f.childNodes.length&&(g.appendChild(f),f=V.cN({t:"p",c:"paragraph pb-r"})),l>e)break}else y(t[n]),l+=t[n].length}(s),function(e){l=0,c=0,f=V.cN({t:"p",c:"paragraph pb-r"});for(let n=0;n<e.length&&!("pEnd"==e[n]||l>t);n++)""!=e[n]&&(e[n].length>t&&(e[n]=e[n].substr(0,t)+" ... "),y(e[n],"isIntro"),l+=e[n].length);if(!c)for(let t=0;t<e.length;t++)if(["http","www."].includes(e[t].toLowerCase().substr(0,4))){y(" ","isIntro"),y(e[t],"isIntro");break}p.appendChild(f)}(s),{$feature:h||!1,$description:g,$socialUl:m,$intro:p}}return V.castYouTubeIframe=x,V.castVimeoIframe=E,V.castDescription=P,{castYouTubeIframe:x,castVimeoIframe:E,castDescription:P}}(),VHelper=function(){"use strict";const e=window.URL||window.webkitURL,t="facebook|twitter|linkedin|t.me|instagram|tiktok|medium",n={createImageNode:async function(e,t){const n=document.createElement("div"),r=await async function(e){return new Promise((t,n)=>{const r=new Image;r.onload=function(){const{width:e,height:n}=r;t({width:e,height:n})},r.onerror=function(){n(new Error("Failed to load image"))},r.src=e})}(e),{width:a,height:i}=r;return n.style.backgroundImage=`url(${e})`,n.style.backgroundSize="cover",n.style.backgroundPosition=t.backgroundPosition||"center",n.style.width=t.width||"100%",n.style.minHeight=t.minHeight||"225px",n.style.maxHeight=t.maxHeight||"25vh",n.style.height=i+"px",t.className&&(n.className=t.className),n}};function r(e){return new Promise((t,n)=>{const r=V.getSetting("tinyImageWidth"),a=V.getSetting("thumbnailWidth"),i=V.getSetting("mediumImageWidth"),s=new FileReader;s.readAsDataURL(e.target.files[0]),s.onload=n=>{const s=new Image;s.src=n.target.result,s.onload=()=>{const n=document.createElement("canvas");n.width=r,n.height=r;const o=n.getContext("2d");o.drawImage(s,0,0,n.width,n.height);const l=document.createElement("canvas");l.width=a,l.height=s.height*(a/s.width);const c=l.getContext("2d");c.drawImage(s,0,0,l.width,l.height);const u=document.createElement("canvas");u.width=i,u.height=s.height*(i/s.width);const d=u.getContext("2d");d.drawImage(s,0,0,u.width,u.height),o.canvas.toBlob(n=>{V.setState("tinyImageUpload",{dataUrl:o.canvas.toDataURL(),blob:n,contentType:n.type,originalName:e.target.files[0].name}),c.canvas.toBlob(n=>{V.setState("thumbnailUpload",{dataUrl:c.canvas.toDataURL(),blob:n,contentType:n.type,originalName:e.target.files[0].name}),d.canvas.toBlob(n=>{V.setState("mediumImageUpload",{dataUrl:d.canvas.toDataURL(),blob:n,contentType:n.type,originalName:e.target.files[0].name}),t({success:!0,status:"images prepared for upload",src:s.src})},"image/jpeg",V.getSetting("mediumImageQuality"))},"image/jpeg",V.getSetting("thumbnailQuality"))},"image/jpeg",V.getSetting("tinyImageQuality"))}},s.onerror=e=>{n({success:!1,status:"could not prepare image for upload",message:e})}})}function a(t){const n=new Uint8Array(t.blob.data),r=new Blob([n],{type:t.contentType}),a=e.createObjectURL(r);return{img:V.cN({t:"img",c:"max-w-full",a:{src:a,alt:t.entity+" Title Image - "+t.originalName}}),src:a}}function i(){const e=window.URL||window.webkitURL;this.clear&&e.revokeObjectURL(this.src)}function s(e){const n=e.replace(/www./gi,"www.").replace(/http/gi,"http").replace(/https/gi,"https"),r=n.match(/(?:www|https?)[^\s]+/g),a=[],i=[],s=[],o=[];let l=(" "+n).slice(1),c=(" "+n).slice(1);if(null!=r){for(let e=0;e<r.length;e++){let n,u=r[e];"."==u.substr(-1)&&(u=u.slice(0,-1)),r[e].match(/(http(s?)):\/\//)||(u="http://"+r[e]);let d=u.split("/")[2];if(d=d.replace("www.",""),Number(u.substr(-5))<-2e3?n=V.castPathOrId(u.split("/").pop()):d.match(new RegExp(t))?(n=u.split("/").pop(),s.push('<a href="'+u+'">'+V.getIcon(d.match(new RegExp(t))[0])+"</a>"),o.push('<a href="'+u+'">'+n+"</a>")):n=d,i.push('<a href="'+u+'" >'+n+"</a>"),d.match(/youtu/)){const e='<div class="iframe-wrapper w-full"><iframe src="https://www.youtube.com/embed/'+u.split("/").slice(-1)[0]+'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>';a.push(e)}else if(d.match(/vimeo/)){const e='<div class="iframe-wrapper w-full"><iframe src="https://player.vimeo.com/video/'+u.split("/").slice(-1)[0]+'?color=ffffff&title=0&byline=0&portrait=0" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe></div>';a.push(e)}else if(d.match(/soundcloud/)){const e=u.split("/"),t=e.slice(-1)[0];if(isNaN(t))a.push('<a href="'+u+'" >'+n+"</a>");else{e.pop(),i.pop(),i.push('<a href="'+e.join("/")+'" >'+n+"</a>");const r=`\n              <div class="iframe-wrapper w-full">\n              <iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay"\n              src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/${t}&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true"\n              ></iframe>\n              </div>\n              `;a.push(r)}}else a.push('<a href="'+u+'" >'+n+"</a>");c=c.split(r[e]).map(t=>a[e].includes("iframe")?t.trim():t).join(a[e]),l=l.split(r[e]).join(i[e])}let n=(" "+c).slice(1);for(let e=0;e<r.length;e++)a[e].match(new RegExp(t))&&(n=n.replace(a[e],""));for(n=n.trim().replace(/( <br>){3,}/g," <br> <br>");n.startsWith("<br>");)n=n.replace("<br>","").trim();return{original:e,links:l,socialLinksImages:!!s.length&&s.join(" "),socialLinksHandles:o,omitOriginalSocialLinks:n,iframes:c,firstIframe:a[0]}}return{original:e,links:e,socialLinksImages:!1,socialLinksHandles:e,omitOriginalSocialLinks:e,iframes:e,firstIframe:a[0]}}function o(e,t){return String(new Date(e)).substr(4,6)}function l(){const e=1*(11*Math.random()+25).toFixed(5),t=-1*(23*Math.random()+32).toFixed(5);return{lat:e,lng:t,latLng:[e,t],lngLat:[t,e]}}function c(e){const t=e?e.split(" ").filter(e=>isNaN(e.replace("#",""))):[];if(t.length){const e=t[0].charAt(0),n=t[0].substr(1).split("").filter(e=>-1==["a","e","i","o","u"].indexOf(e))[0];return e+(t[1]?t[1].charAt(0):n?n.toUpperCase():"")}return e?e.charAt(0):""}function u(e){return e.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,t)=>t.toUpperCase())}function d(e){if(e.includes("#"))return e.toLowerCase().replace("#","").replace(/\s/g,"-");if(e.includes("/")){return e.split("/").pop()}{const t=e.split("-"),n="#"+t.pop();return V.castEntityTitle(t.join(" ")).data[0]+" "+n}}function p(e,t){const n=t?"/"+t+"/":"/profile/";if(e.includes("#"))return n+e.toLowerCase().replace("#","").replace(/\s/g,"-");{const t=(e=e.replace(n,"")).split("-"),r="#"+t.pop();return V.castEntityTitle(t.join(" ")).data[0]+" "+r}}function g(e,t){const n=e.split("#");return t?e+" "+t:{title:n[0].trim(),tag:"#"+n[1]}}function f(e){switch(e){case"all":return"all";case"Person":return"aa";case"aa":return"Person";case"PersonMapped":return"ab";case"ab":return"Person";case"Business":return"ac";case"ac":return"Business";case"Institution":return"ad";case"ad":return"Institution";case"NGO":return"ae";case"ae":return"NGO";case"GOV":return"af";case"af":return"GOV";case"Network":return"ag";case"ag":return"Network";case"Skill":return"ah";case"ah":return"Skill";case"Task":return"ai";case"ai":return"Task";case"Place":return"aj";case"aj":return"Place";case"Event":return"ak";case"ak":return"Event";case"Media":return"al";case"al":return"Media";case"Dataset":return"am";case"am":return"Dataset";case"Pool":return"an";case"an":return"Pool";case"Farm":return"ao";case"ao":return"Farm";case"Plot":return"ap";case"ap":return"Plot";default:return e}}function m(e,t){if(!e||"undefined"===e)return e;if(t)return JSON.parse(JSON.stringify(e));if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}else{if("object"==typeof e)return JSON.stringify(e);console.error("Could not convert JSON")}}function h(e,t){return e.substr(0,t||6)+" ... "+e.substr(e.length-(t||6))}function y(e){const t=e=>{const t=e.replace(/-/g,"");return(e=>{try{return btoa(e)}catch(t){return Buffer.from(e).toString("base64")}})(String.fromCharCode.apply(null,t.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" "))).replace(/\//g,"_").replace(/\+/g,"-").substring(0,22)},n=e=>{const t=(e=>{try{return atob(e)}catch(t){return Buffer.from(e,"base64").toString()}})(e.replace(/_/g,"/").replace(/-/g,"+"));let n,r="";for(let e=0,a=t.length;e<a;e++)n=t.charCodeAt(e).toString(16),r+=2===n.length?n:"0"+n;for(r=r.toLowerCase();r.length<32;)r="0"+r;return r.replace(/(.{8})(.{4})(.{4})(.{4})(.{12})/,"$1-$2-$3-$4-$5")};if(e)return e.length==V.getSetting("uuidStringLength")?n(e):t(e);{let e,n,r;const a=(e,t)=>{const n=t||0,r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).substr(1));const a=r;return(a[e[n+0]]+a[e[n+1]]+a[e[n+2]]+a[e[n+3]]+"-"+a[e[n+4]]+a[e[n+5]]+"-"+a[e[n+6]]+a[e[n+7]]+"-"+a[e[n+8]]+a[e[n+9]]+"-"+a[e[n+10]]+a[e[n+11]]+a[e[n+12]]+a[e[n+13]]+a[e[n+14]]+a[e[n+15]]).toLowerCase()},i=()=>{const e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),t=new Uint8Array(16);if(!e)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)},s=(e,t,n)=>{const r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Uint32Array(16):null,e=null);const s=(e=e||{}).random||(e.rng||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(let e=0;e<16;++e)t[r+e]=s[e];return t||a(s)},o=()=>{try{return s()}catch(e){return!r&&({v4:r}=require("uuid")),r()}};for(e=o(),n=t(e);!n.charAt(3).match(/[a-zABE-Z]/)||n.includes("-")||n.includes("_")||["v","V"].includes(n.charAt(3))||["x","X"].includes(n.charAt(4));)e=o(),n=t(e);return{v4:e,base64Url:n}}}function v(e,t){e=Math.ceil(e),t=Math.floor(t);return Math.floor(Math.random()*(t-e+1))+e}function b(){return Math.floor(Date.now()/1e3)}function w(e,n){return e.match(new RegExp(t))?V.cN({t:"img",r:V.getSetting("sourceEndpoint")+"/assets/icon/social/"+e+".svg",a:{height:"28px"}}):"+"==e?V.cN({t:"span",c:"plus-icon fs-l no-txt-select",h:"+"}):V.cN({t:"img",r:V.getSetting("sourceEndpoint")+"/assets/icon/"+e+"-24px.svg",a:{height:n||"16px"}})}function S(e){return e.replace(/(<([^>]+)>)/gi,"")}function x(...e){return t=>e.reduce((e,t)=>t(e),t)}function E(e){return new Promise(t=>setTimeout(t,e))}function P(e,t){let n;return function(...r){n&&clearTimeout(n),n=setTimeout(()=>{e(...r)},t)}}function k(e,t,n){return{success:!1,message:`could not ${e}: ${t||"no error message"}`,data:[n]}}function T(e,t){return{success:!0,message:"successfully "+e,data:Array.isArray(t)?t:[t]}}function C(e){return!(e.length>70)&&/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,15}$/.test(e)}return V.castProfileImageNode=n.createImageNode,V.castImageUpload=r,V.castEntityThumbnail=a,V.setSrc=i,V.castLinks=s,V.castTime=o,V.castRandLatLng=l,V.castInitials=c,V.castCamelCase=u,V.castSlugOrId=d,V.castPathOrId=p,V.castFullId=g,V.castRole=f,V.castJson=m,V.castClone=function(e){return JSON.parse(JSON.stringify(e))},V.castShortAddress=h,V.castUuid=y,V.castRandomInt=v,V.castUnix=b,V.getIcon=w,V.stripHtml=S,V.setPipe=x,V.sleep=E,V.debounce=P,V.successFalse=k,V.successTrue=T,V.isEmail=C,{castImageUpload:r,castEntityThumbnail:a,setSrc:i,castLinks:s,castTime:o,castRandLatLng:l,castInitials:c,castCamelCase:u,castSlugOrId:d,castPathOrId:p,castFullId:g,castRole:f,castJson:m,castShortAddress:h,castUuid:y,castRandomInt:v,castUnix:b,getIcon:w,stripHtml:S,setPipe:x,sleep:E,debounce:P,successFalse:k,successTrue:T,isEmail:C}}(),VLedger=function(){"use strict";const e=V.getSetting("sourceEndpoint");async function t(){"EVM"==V.getSetting("transactionLedger")?(V.getSetting("useBuilds")?await Promise.all([V.setScript(e+"/vcore/builds/vevm.min.js")]).then(()=>console.log("Success loading evm build")).catch(()=>console.error("Error loading evm build")):await Promise.all([V.setScript(e+"/vcore/dependencies/secondary/web3.min.js"),V.setScript(e+"/vcore/src/ledger/secondary/v-evm-abi.js"),V.setScript(e+"/vcore/src/ledger/secondary/v-evm.js")]).then(()=>console.log("Success loading web3.js and evm source files")).catch(()=>console.error("Error loading web3.js and evm source files")),await V.getWeb3Provider()):"EOS"==V.getSetting("transactionLedger")?(await Promise.all([V.setScript(e+"/vcore/dependencies/eosjs-api.js"),V.setScript(e+"/vcore/dependencies/eosjs-jsonrpc.js"),V.setScript(e+"/vcore/dependencies/eosjs-jssig.js"),V.setScript(e+"/vcore/dependencies/eosjs-numeric.js")]),console.log("*** eos scripts loaded ***")):"Symbol"==V.getSetting("transactionLedger")&&(await V.setScript(e+"/vcore/dependencies/symbol-sdk-0.17.5-alpha.js"),await V.setScript(e+"/vcore/src/ledger/v-symbol.js"),console.log("*** symbol scripts loaded ***")),"Firebase"==V.getSetting("entityLedger")?V.getSetting("useBuilds")||await Promise.all([V.setScript(e+"/vcore/src/ledger/primary/v-namespace.js")]).then(()=>console.log("Success loading v-namespace.js")).catch(()=>console.error("Error loading v-namespace.js")):"3Box"==V.getSetting("entityLedger")&&(await Promise.all([V.setScript(e+"/vcore/dependencies/3box.min.js"),V.setScript(e+"/vcore/src/ledger/v-3box.js")]),console.log("*** 3Box scripts loaded ***")),"Firebase"==V.getSetting("chatLedger")&&(V.getSetting("useBuilds")?await Promise.all([V.setScript(e+"/vcore/builds/vchat.min.js")]).then(()=>console.log("Success loading chat build")).catch(()=>console.error("Error loading chat build")):(await Promise.all([V.setScript(e+"/vcore/dependencies/secondary/firebase-app.js")]),await Promise.all([V.setScript(e+"/vcore/dependencies/secondary/firebase-database.js")]).then(()=>console.log("Success loading firebase chat")).catch(()=>console.error("Error loading firebase chat")),await V.setScript(e+"/vcore/dependencies/secondary/firebase-chat-init.js").then(()=>console.log("Success initializing firebase chat")).catch(()=>console.error("Error initializing firebase chat")))),[V.getSetting("entityLedger"),V.getSetting("chatLedger")].includes("MongoDB")&&(await Promise.all([V.setScript(e+"/vcore/src/ledger/secondary/v-mongodb.js"),V.setScript(e+"/vcore/dependencies/secondary/socket.io.min.js")]),console.log("*** MongoDB and socket.io scripts loaded ***"),await async function(){return new Promise((e,t)=>{const n=V.getSetting("socketHost"),r=V.getSetting("socketPort"),a=n+(r?":"+r:"");window.socket=io.connect(a,{secure:!0}),window.socket.on("connect",()=>{e(socket.id+" connected")}),window.socket.on("connect_error",()=>{t("could not connect socket")})})}().then(e=>{console.log(e)}))}function n(e,t){const n=t?{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)}:{method:"GET"};return fetch(e,n).then(e=>e.json()).then(e=>({success:!0,status:"fetch success",data:[e]})).catch(e=>({success:!1,status:"fetch error",message:e}))}function r(e,t,r){if("MongoDB"==r)return V.setMongoDB(e,t);if("Firebase"==r)return V.setNamespace(e,t);if("EVM"==r){if("transaction"==t){if("ETH"==e.currency)return V.setCoinTransaction(e);if("V"==e.currency)return V.cA()?V.setTokenTransaction(e):V.setTokenTransactionNonWallet(e)}else if("verification"==t)return V.setAddressVerification(e)}else if("Symbol"==r){if("transaction"==t)return V.setMosaicTransaction(e)}else if("EOS"==r){if("transaction"==t)return V.setEOSTransaction(e)}else if("3Box"==r){if("entity"==t)return V.set3BoxSpace(t,e)}else if("api"==r)return n(t,e)}function a(e,t,r){if("MongoDB"==r)return V.getMongoDB(e,t);if("Firebase"==r)return V.getNamespace(e,t);if("EVM"==r){if("transaction"==t)return V.getAddressHistory(e)}else if("Symbol"==r){if("transaction"==t)return V.getAddressHistory()}else if("EOS"==r){if("transaction"==t)return V.getAddressHistory()}else{if("3Box"==r)return V.get3BoxSpace(e).then(e=>e);if("api"==r)return n(t)}}return V.getData=a,V.setData=r,{launch:async function(){return t()},getData:a,setData:r}}(),VNamespace=function(){"use strict";const e={useClientData:!1,namespaceEndpoint:V.getSetting("namespaceEndpoint"),continent:8,avatar:6};let t;const n="a c d i j m n y { a b m } holders holderOf { c fullId } auth { i j uPhrase creatorUPhrase }",r="f m { a b c m n r } n { a c z } o { a b z } p { z } q { q1 q2 q3 q4 q5 q6 q7 q8 q9 q10 } s { s1 s2 s3 s4 s5 s6 s7 s8 s9 s10 s11 s12 s13 s14 s15 s16 s17 s18 s19 s20 s21 s22 s23 s24 s25 s26 s27 s28 s29 s30 s31  }",a="f m { a r } n { a c z } o { a b z }";function i(t){const n=t.uuidE,r=t.contextE,a=V.castRole(t.typeE),i=t.uuidP,s=t.uuidA,o=t.issuer,l=t.evmCredentials.address,c=t.receivingAddresses.evm,u=t.title,d=t.tag,p={a:t.creatorUuid,m:t.heldBy},g={a:String(t.unix),c:String(t.expires),m:t.active,z:t.statusCode},f={a:t.uuidA,b:t.contextA,d:t.uuidE,e:t.uuidP,f:t.uPhrase,i:t.evmCredentials.address,j:t.evmCredentials.privateKey||void 0},m={i:t.evmCredentials.address,j:t.evmCredentials.privateKey||void 0},h={descr:t.props.descr,email:t.props.email,emailPrivate:t.props.emailPrivate,target:t.props.target,unit:t.props.unit,continent:t.continent,avatar:t.avatar,privacy:t.privacy,lngLat:t.geometry.coordinates,loc:t.geometry.baseLocation,tinyImg:t.tinyImageDU,thumb:t.thumbnailDU,medImg:t.mediumImageDU,imgName:t.imageName,evmIssuer:t.evmIssuer};return e.useClientData?{a:n,b:r,c:a,d:i,e:s,g:o,i:l,j:c,m:u,n:d,x:p,y:g,auth:f}:{a:"-",c:a,i:l,j:c,m:u,authInputServerSide:m,profileInputServerSide:h}}function s(e){return{a:e.uuidP,b:e.contextP,d:e.uuidE,m:{a:e.props.descr,b:e.props.email,m:e.props.target,n:e.props.unit},n:{a:e.geometry.coordinates,c:e.geometry.baseLocation},o:{a:e.tinyImageDU,b:e.thumbnailDU,c:e.mediumImageDU,n:e.imageName},x:{a:e.creatorUuid,m:e.heldBy},y:{a:String(e.unix)}}}function o(t,n,r){const a=V.castFullId(t.m,t.n),i=V.castRandLatLng();return{uuidE:t.a||n.d,uuidP:t.d||n.a,role:V.castRole(t.c),roleCode:t.c,privacy:n.f,title:t.m,tag:t.n,profile:{title:t.m,tag:t.n},fullId:a,path:V.castPathOrId(a),properties:{description:n.m?n.m.a:void 0,filteredDescription:n.m?n.m.r:void 0,preferredLangs:n.m?n.m.c:void 0,target:n.m?n.m.m:void 0,unit:n.m?n.m.n:void 0,email:n.m?n.m.b:void 0},images:{tinyImage:n.o?n.o.a:void 0,thumbnail:n.o?n.o.b:void 0,mediumImage:r&&r.o?r.o.c:void 0,avatar:n.o&&n.o.z?n.o.z:e.avatar},geometry:{coordinates:n.n?n.n.a:[i.lng,i.lat],baseLocation:n.n?n.n.c:void 0,type:"Point",continent:n.n&&n.n.z?n.n.z:e.continent},type:"Feature",status:{active:t.y?t.y.m:void 0},holders:t.holders,holderOf:t.holderOf?t.holderOf:void 0,evmCredentials:{address:t.i},receivingAddresses:{evm:t.j},auth:{uPhrase:t.auth?t.auth.uPhrase:void 0,creatorUPhrase:t.auth?t.auth.creatorUPhrase:void 0,evmCredentials:{address:t.auth?t.auth.i:void 0,privateKey:t.auth?t.auth.j:void 0}},transactions:{lastBlock:n.p?n.p.z:void 0},questionnaire:{q1:n.q?n.q.q1:void 0,q2:n.q?n.q.q2:void 0,q3:n.q?n.q.q3:void 0,q4:n.q?n.q.q4:void 0,q5:n.q?n.q.q5:void 0,q6:n.q?n.q.q6:void 0,q7:n.q?n.q.q7:void 0,q8:n.q?n.q.q8:void 0,q9:n.q?n.q.q9:void 0,q10:n.q?n.q.q10:void 0},servicefields:{s1:n.s?n.s.s1:void 0,s2:n.s?n.s.s2:void 0,s3:n.s?n.s.s3:void 0,s4:n.s?n.s.s4:void 0,s5:n.s?n.s.s5:void 0,s6:n.s?n.s.s6:void 0,s7:n.s?n.s.s7:void 0,s8:n.s?n.s.s8:void 0,s9:n.s?n.s.s9:void 0,s10:n.s?n.s.s10:void 0,s11:n.s?n.s.s11:void 0,s12:n.s?n.s.s12:void 0,s13:n.s?n.s.s13:void 0,s14:n.s?n.s.s14:void 0,s15:n.s?n.s.s15:void 0,s16:n.s?n.s.s16:void 0,s17:n.s?n.s.s17:void 0,s18:n.s?n.s.s18:void 0,s19:n.s?n.s.s19:void 0,s20:n.s?n.s.s20:void 0,s21:n.s?n.s.s21:void 0,s22:n.s?n.s.s22:void 0,s23:n.s?n.s.s23:void 0,s24:n.s?n.s.s24:void 0,s25:n.s?n.s.s25:void 0,s26:n.s?n.s.s26:void 0,s27:n.s?n.s.s27:void 0,s28:n.s?n.s.s28:void 0,s29:n.s?n.s.s29:void 0,s30:n.s?n.s.s30:void 0,s31:n.s?n.s.s31:void 0}}}function l(e,t){let r,a=`query GetEntities ( $where: WhereEntity ) {\n        getEntities(where: $where) { ${"string"==typeof e?n:"a c d m n"} }\n      }`;if("entity by role"==t)console.log(777,"by Role"),r={},a="query GetEntitiesByRole ( $where: WhereEntity ) {\n             getEntities(where: $where) { a c d m n }\n           }";else if("entity by uuidE"==t)console.log(333,"by uuidE:",e),r={a:"string"==typeof e?[e]:e};else if("entity by evmAddress"==t)console.log(444,"by EVM Address:",e),r={i:e};else if("entity by fullId"==t){const t=V.castFullId(e);console.log(555,"by FullId:",t.title,t.tag),r={m:t.title,n:t.tag}}return g(a,{where:r})}function c(e){return g(`query GetEntity ( $where: WhereEntity ){\n        getEntities(where: $where) { ${e.isMapPopUp?"a c d m n":n} }\n      }`,{where:{a:[e.uuidE]}})}function u(e){return g(`query GetProfile ( $where: WhereProfile ){\n           getProfile(where: $where) { ${e.isMapPopUp?a:r} }\n         }`,{where:{a:e.uuidP}})}function d(e){return g("query GetImage ( $where: WhereProfile ){\n           getImage(where: $where) { a o { c } }\n         }",{where:{a:e.uuidP}})}function p(e){console.log(222,"by "+e);return g("query getEmphasis ( $where: WhereEmphasis ){\n                      getEmphasis(where: $where) {\n                        a\n                      }\n                    }\n                  ",{where:{emphasis:e}})}function g(n,r){return fetch(e.namespaceEndpoint,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:t?"Bearer "+t:""},body:JSON.stringify({query:n,variables:r})}).then(e=>e.json())}async function f(e,t){if(e.isMapPopUp||e.isDisplay||e.isReturningUser){console.log("GET SINGLE ENTITY: ",e);const t=await Promise.all([c(e),u(e),e.isDisplay?d(e):{data:{getImage:[!1]}}]);if(t[0].errors||t[1].errors||t[2].errors||null===t[0].data.getEntities[0]||null===t[1].data.getProfile[0]||null===t[2].data.getImage[0])return V.successFalse("get entity and profile");{const e=o(t[0].data.getEntities[0],t[1].data.getProfile[0],t[2].data.getImage[0]);return V.successTrue("got entity and profile",e)}}let n;if(console.log("GET ENTITIE(S): ",e,t),"entity by point"==t){const e=await(console.log(111,"by point"),g("query GetEntitiesByPoint ( $where: WhereGeo ){\n                 getPoints(where: $where) { a c d f zz { i m } }\n               }",{where:{}}));return e.errors||null==e.data.getPoints[0]?V.successFalse("get entities by point"):V.successTrue("got points",e.data.getPoints)}if(["entity by feature","entity by vip"].includes(t)){const t=await p(e);if(t.errors||null==t.data.getEmphasis[0])return V.successFalse("get entities by feature");{const e=t.data.getEmphasis.map(e=>e.a);n=await l(e,"entity by uuidE")}}else if("entity by highlight"==t){const t=await p(e),r=V.getCache("mixin-highlights");if(t.errors||null==t.data.getEmphasis[0]){if(!r)return V.successFalse("get entities by highlight");n=await l(r.data,"entity by uuidE")}else{let e=t.data.getEmphasis.map(e=>e.a);r&&(e=[...new Set(e.concat(r.data))]),n=await l(e,"entity by uuidE")}}else if("entity by query"==t){const t=await function(e){return console.log(888,"by query"),e.role=V.castRole(e.role),g("query GetEntitiesByQuery( $filter: Filter! ) {\n      getEntityQuery(filter: $filter) {\n        a c d m n\n      }\n    }\n    ",{filter:e})}(e);if(t.errors||null==t.data.getEntityQuery[0])return V.successFalse("get entities by query");n=t}else{if("transaction log"==t){const t=await(r=e,g(`query GetTransactionLog {\n           getProfiles (array: ${V.castJson([r])}) {\n             p { a { a b c g h i j m n o p q r s t u v } z }\n           }\n         }`));if(t.errors||null==t.data.getProfiles[0].p||null==t.data.getProfiles[0].p.a)return V.successFalse("get transfer log");{const e=t.data.getProfiles[0].p.a.map(e=>function(e){return{txType:e.a,title:e.b,amount:e.g,feeAmount:e.h,contribution:e.i,payout:e.j,fromAddress:e.m,fromUuidE:e.n,fromEntity:e.o,toAddress:e.p,toUuidE:e.q,toEntity:e.r,hash:e.s,block:e.t,blockDate:e.u,logIndex:e.v}}(e));return V.successTrue("got transfer log",e)}}n=await l(e,t)}var r;if(!n.errors&&(n.data.getEntities&&null!=n.data.getEntities[0]||n.data.getEntityQuery&&null!=n.data.getEntityQuery[0])){const t=n.data.getEntities||n.data.getEntityQuery;if(e.isAutofill){const e=t.map(e=>o(e,{}));return V.successTrue("got entity titles for autofill",e)}if(1==t.length){return f({isDisplay:!0,uuidE:t[0].a,uuidP:t[0].d})}{const e=await function(e){const t=e.map(e=>e.d);return g(`query GetProfiles {\n           getProfiles (array: ${V.castJson(t)}) { ${a} }\n         }`)}(t);if(e.errors||null==e.data.getProfiles[0])return V.successFalse("get profiles");{const n=t.map((t,n)=>o(t,e.data.getProfiles[n]));return V.successTrue("got entities and profiles",n)}}}return V.successFalse("get Entities")}async function m(t,a){return"entity"==a?function(t){return g(`mutation SetNewEntity( $input: ${e.useClientData?"InputEntity":"EntityInputServerSide"}! ) {\n                setEntity(input: $input) {\n                  ${n}\n                }\n              }\n            `,{input:i(t)})}(t).then(async n=>{if(n.errors)throw new Error(n.errors[0].message);let a;if(e.useClientData){const e=await function(e){return g(`mutation SetNewProfile( $input: InputProfile! ) {\n                setProfile(input: $input) {\n                  ${r}\n                }\n              }\n            `,{input:s(e)})}(t);a=o(n.data.setEntity,e.data.setProfile)}else{const e=await u({uuidP:n.data.setEntity.d});a=o(n.data.setEntity,e.data.getProfile[0])}return V.successTrue("set entity",a)}).catch(e=>V.successFalse("set entity",e)):"entity update"==a?["profile.title","receivingAddresses.evm","status.active"].includes(t.field)?function(t){console.log("UPDATING ENTITY: ",t);const n=V.getState("active").lastViewedUuidE;let r,a,i,s;switch(t.field){case"profile.title":r=V.getLastViewed().role,i=t.data;break;case"receivingAddresses.evm":a=t.data;break;case"status.active":s={m:t.data}}return g(`mutation SetEntityUpdate( $input: ${e.useClientData?"InputEntity":"EntityInputServerSide"}! ) {\n                setEntity(input: $input) {\n                  a\n                }\n              }\n            `,{input:{a:n,c:r,j:a,m:i,y:s}})}(t).then(e=>e.errors?V.successFalse("update entity",e.errors[0].message,e.data.setEntity):V.successTrue("updated entity",e.data.setEntity)).catch(e=>V.successFalse("update entity",e)):"images"==t.field?function(e){console.log("UPDATING IMAGE: ",e);const t=e.activeProfile||V.getState("active").lastViewedUuidP;let n;switch(e.field){case"images":n={a:e.data.tiny.dataUrl,b:e.data.thumb.dataUrl,c:e.data.medium.dataUrl,n:e.data.thumb.originalName}}return g("mutation SetImageUpdate( $input: ImageInputServerSide! ) {\n                setImage(input: $input) {\n                  a\n                }\n              }\n            ",{input:{a:t,o:n}})}(t).then(e=>e.errors?V.successFalse("update image",e.errors[0].message,e.data.setImage):V.successTrue("updated image",e.data.setImage)).catch(e=>V.successFalse("update image",e)):function(t){console.log("UPDATING PROFILE: ",t);const n=t.activeProfile||V.getState("active").lastViewedUuidP;let r,a,i,s,o,l,c,u="";if(t.field.includes("questionnaire")){const e=t.field.replace("questionnaire.q","");l={};for(let n=1;n<=10;n++)e==n&&(l["q"+e]=t.data)}else if(t.field.includes("servicefields")){const e=t.field.replace("servicefields.s","");c={};for(let n=1;n<=31;n++)e==n&&(c["s"+e]=t.data)}switch(t.field){case"properties.description":a={a:t.data};break;case"properties.email":a={b:t.data};break;case"properties.preferredLangs":a={c:t.data};break;case"properties.target":a={m:Number(t.data)};break;case"properties.unit":a={n:t.data};break;case"geometry.baseLocation":i=t.data.loc?{a:[Number(t.data.lng),Number(t.data.lat)],c:t.data.loc}:null,u="n { a c }";break;case"images":s={a:t.data.tiny.dataUrl,b:t.data.thumb.dataUrl};break;case"transaction.log":o={a:(d=t.data,d.map(e=>({a:e.txType,b:e.title,g:e.amount,h:e.feeAmount,i:e.contribution,j:e.payout,m:e.fromAddress,n:e.fromUuidE,o:e.fromEntity,p:e.toAddress,q:e.toUuidE,r:e.toEntity,s:e.hash,t:e.block,u:e.blockDate,v:e.logIndex}))),z:t.lastBlock},u="p { z }";break;case"privacy":r=Number(t.data.privacy),u="f"}var d;return g(`mutation SetProfileUpdate( $input: ${e.useClientData?"InputProfile":"ProfileInputServerSide"}! ) {\n                setProfile(input: $input) {\n                  ${"a "+u}\n                }\n              }\n            `,{input:{a:n,f:r,m:a,n:i,o:s,p:o,q:l,s:c}})}(t).then(e=>e.errors?V.successFalse("update profile",e.errors[0].message,e.data.setProfile):V.successTrue("updated profile",e.data.setProfile)).catch(e=>V.successFalse("update profile",e)):"message"==a?function(e){return new Promise(t=>{NetworkMainRoom.child(e.time).update({a:e.time,i:e.uuidE,j:e.sender,m:e.message},()=>{t({success:!0})})})}(t):V.checkForEmphasisTrigger(a)?function(e,t){return g("mutation setEmphasis( $input: InputEmphasis! ) {\n                setEmphasis(input: $input) {\n                  a\n                }\n              }\n            ",{input:{a:e,y:{c:V.castUnix()+5184e3},emphasis:t}})}(t,a):"managed transaction"==a?function(e){return console.log("send managed transaction"),g("mutation SetTransaction( $tx: InputTransaction! ) {\n                      setTransaction(tx: $tx) {\n                        success error data { blockNumber transactionHash }\n                      }\n                    }\n                  ",{tx:{initiatorAddress:e.initiatorAddress,recipientAddress:e.recipientAddress,txTotal:String(e.txTotal)}})}(t):void 0}function h(e){t=e}return V.getNamespace=f,V.setNamespace=m,V.setJwt=h,{getNamespace:f,setNamespace:m,setJwt:h}}(),VKey=function(){const e={googlePlaces:"AIzaSyCJmaFItzlAlGc8n21wxL-vFPLM7M_jFOI",mapBox:"pk.eyJ1IjoidmFsdWVpbnN0cnVtZW50IiwiYSI6ImNqbGw3aWYxejB1aTUzcHMxZ2o4ejVuMm8ifQ.9nokF78xbuqVF09cKCvpIw",rpc:"https://goerli.infura.io/v3/af27213a88d94d74ba194435b4ece99b"},t={viAdmin:"philipeachille"};function n(t){return e[t]}function r(e){return t[e]}return V.getApiKey=n,V.getSensitiveData=r,{getApiKey:n,getSensitiveData:r}}(),VLaunch=async function(){const e=(()=>{const e={ledgerLoad:"Connecting to ledger",themeLoad:"Setting up the theme",pluginsLoad:"Initializing network's plugins"};return V.getSetting("devMode")&&VTranslation.setStringsToTranslate(e),e})();V.setNode("loader","Loading language ..."),await VTranslation.launch(),V.setNode("loader",V.getString(e.ledgerLoad)),await VLedger.launch(),await(async()=>V.setAuth().then(e=>{if(e.success)return console.log("auth success"),e.data[0];throw new Error("could not set auth")}).then(e=>V.getEntity({uuidE:e.uuidE,uuidP:e.uuidP,isReturningUser:!0})).then(e=>{if(e.success)return V.setActiveEntity(e.data[0]),!0;throw new Error("could not get entity after set auth")}).catch(e=>{V.setTempRefreshToken(),console.log("auth unsuccessful -",e)}))(),V.setNode("loader",V.getString(e.themeLoad)),V.getSetting("useBuilds")?await Promise.all([V.setScript(V.getSetting("sourceEndpoint")+"/theme/builds/vtheme.min.js")]).then(()=>console.log("Success loading theme build")).catch(()=>console.error("Error loading theme build")):await Promise.all([V.setScript(V.getSetting("sourceEndpoint")+"/theme/src/canvas/canvas.js")]),V.setNode("loader",V.getString(e.pluginsLoad)+" - App Version: "+V.getSetting("appVersion")+"."+V.getSetting("uploadVersion")),clearTimeout(preloaderTimeout),await Canvas.launch(),Canvas.draw({path:window.location.pathname})}();